const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-D3iOixVn.js","assets/vendor-editor-Cbnfy5IV.js","assets/vendor-utils-BeCPKUKe.js","assets/index-DO9zxgcv.js","assets/vendor-terminal-Co9mG8Of.js","assets/vendor-terminal-C0BCwPpi.css","assets/index-ChWdfY49.css"])))=>i.map(i=>d[i]);
import{c as v,r as n,j as e,u as $t,a as lt,b as m,H as Ut,X as O,A as W,d as J,f as rt,F as Bt,e as Wt,g as ne,C as Jt,s as h,h as Ht,_ as qt}from"./index-DO9zxgcv.js";import{U as ot,P as ct,R as dt}from"./upload-Bs2bF51p.js";import{F as ie}from"./folder-C6nDsPry.js";import{D as we}from"./download-BAhVRRd1.js";import{T as le}from"./trash-2-CbcpzXyx.js";import{A as mt,S as _t}from"./search-TNXn00TS.js";import{E as ut}from"./eye-DlR3Mca3.js";import"./vendor-terminal-Co9mG8Of.js";import"./vendor-utils-BeCPKUKe.js";/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=v("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=v("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=v("FileArchive",[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=v("FilePen",[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=v("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=v("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=v("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=v("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);function Zt({x:i,y:r,items:x,onClose:f}){const p=n.useRef(null);n.useEffect(()=>{const y=S=>{p.current&&!p.current.contains(S.target)&&f()};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[f]);const z={top:r,left:i};return e.jsx("div",{ref:p,className:"fixed z-50 bg-slate-800 border border-slate-700 rounded-lg shadow-xl py-1 min-w-[160px]",style:z,children:x.map((y,S)=>e.jsxs("button",{className:`w-full text-left px-4 py-2 text-sm flex items-center gap-2 hover:bg-slate-700 ${y.danger?"text-red-400 hover:text-red-300":"text-slate-200 hover:text-white"}`,onClick:()=>{y.onClick(),f()},children:[y.icon&&e.jsx("span",{className:"w-4 h-4",children:y.icon}),y.label]},S))})}const Xt=n.lazy(()=>qt(()=>import("./index-D3iOixVn.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),Qt=async i=>{const r=new URL("/api/fs",window.location.origin);return i&&r.searchParams.set("path",i),m(r.toString())},Gt=()=>m("/api/fs/drives"),yt=i=>i.replace(/\//g,"\\"),ze=i=>{if(!i)return"";const r=yt(i);return r.endsWith("\\")?r:`${r}\\`},Ce=i=>{if(!i)return"";let r=yt(i).replace(/\\+$/,"");if(r.startsWith("\\\\")){const p=r.split("\\").filter(Boolean);return p.length<=2?`\\\\${p.join("\\")}\\`:(p.pop(),`\\\\${p.join("\\")}\\`)}if(r.endsWith(":"))return`${r}\\`;const f=r.lastIndexOf("\\");return f<=1?`${r.slice(0,f+1)}\\`:`${r.slice(0,f)}\\`},re=(i,r)=>i?`${ze(i)}${r}`:r,Yt=i=>{switch(i.split(".").pop()?.toLowerCase()){case"js":case"jsx":return"javascript";case"ts":case"tsx":return"typescript";case"json":return"json";case"css":return"css";case"html":return"html";case"cs":return"csharp";case"sql":return"sql";case"xml":return"xml";case"md":return"markdown";case"yml":case"yaml":return"yaml";default:return"plaintext"}};function cs(){const[i,r]=n.useState(""),[x,f]=n.useState(null),[p,z]=n.useState(""),[y,S]=n.useState(!1),[Se,oe]=n.useState(!1),[Pe,H]=n.useState(!1),[o,ce]=n.useState(new Set),[g,A]=n.useState(null),[j,De]=n.useState(()=>{try{const t=localStorage.getItem("weasel.bookmarks");return t?JSON.parse(t):[]}catch{return[]}}),[q,de]=n.useState(!1),[k,Fe]=n.useState(""),[Ee,_]=n.useState(!1),[T,Le]=n.useState(null),[bt,K]=n.useState(""),[P,me]=n.useState(!1),{t:V}=$t(),[u,gt]=n.useState({key:"name",direction:"asc"}),[ue,jt]=n.useState(()=>{const t=localStorage.getItem("weasel.layout.leftPanelWidth");return t?parseInt(t):33}),[c,Z]=n.useState(null),[X,Oe]=n.useState(!1),[w,R]=n.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{},variant:"info"});n.useEffect(()=>{const t=localStorage.getItem("weasel.lastPath");t&&!i&&r(t)},[]),n.useEffect(()=>{i&&localStorage.setItem("weasel.lastPath",i)},[i]);const{data:N,mutate:Ae,isLoading:Q,error:Te}=lt(i,Qt,{revalidateOnFocus:!1}),{data:Re}=lt("drives",Gt,{revalidateOnFocus:!1}),he=Array.isArray(Re)?Re:[],G=n.useMemo(()=>(Array.isArray(N)?N:[]).filter(s=>s.isDirectory),[N]),Y=n.useMemo(()=>(Array.isArray(N)?N:[]).filter(s=>!s.isDirectory),[N]),Ie=n.useMemo(()=>{if(!Array.isArray(G))return[];if(!k)return G;const t=k.toLowerCase();return G.filter(s=>s.name.toLowerCase().includes(t))},[G,k]),Me=n.useMemo(()=>{if(!Array.isArray(Y))return[];if(!k)return Y;const t=k.toLowerCase();return Y.filter(s=>s.name.toLowerCase().includes(t))},[Y,k]),ee=n.useCallback(t=>[...t].sort((s,a)=>{let l=0;switch(u.key){case"name":l=s.name.localeCompare(a.name);break;case"size":l=s.sizeBytes-a.sizeBytes;break;case"date":l=new Date(s.modifiedAt).getTime()-new Date(a.modifiedAt).getTime();break}return u.direction==="asc"?l:-l}),[u]),I=n.useMemo(()=>ee(Ie),[Ie,ee]),M=n.useMemo(()=>ee(Me),[Me,ee]),$=t=>{gt(s=>({key:t,direction:s.key===t&&s.direction==="asc"?"desc":"asc"}))},d=n.useCallback(()=>Ae(),[Ae]);n.useEffect(()=>{if(!q)return;const t=s=>{s.target.closest(".relative")||de(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[q]),n.useEffect(()=>{const t=s=>{s.target instanceof HTMLInputElement||s.target instanceof HTMLTextAreaElement||x||(s.ctrlKey&&s.key==="c"&&o.size>0?(s.preventDefault(),Ge()):s.ctrlKey&&s.key==="x"&&o.size>0?(s.preventDefault(),Ye()):s.ctrlKey&&s.key==="v"&&g?(s.preventDefault(),et()):s.key==="Delete"&&o.size>0?(s.preventDefault(),Qe()):s.ctrlKey&&s.key==="a"?(s.preventDefault(),zt()):s.key==="Escape"?(s.preventDefault(),b()):(s.key==="F5"||s.ctrlKey&&s.key==="r")&&(s.preventDefault(),d()))};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[o,g,x]);const $e=t=>{r(ze(t.fullPath)),be()},kt=async t=>{oe(!0);try{const s=new URL("/api/fs/content",window.location.origin);s.searchParams.set("path",t);const a=await fetch(s.toString());if(!a.ok)throw new Error(await a.text());const l=await a.text();z(l)}finally{oe(!1)}},Ue=async t=>{f(t.fullPath),H(!1),await kt(t.fullPath)},[te,Be]=n.useState(""),[wt,D]=n.useState(!1),We=async()=>{if(te.trim()){if(!i){h("Select a folder before creating a new folder.","warning");return}try{await m("/api/fs/directory",{method:"POST",body:JSON.stringify({parentPath:i,name:te.trim()})}),await d(),Be(""),D(!1),h("Folder created successfully","success")}catch(t){h(`Failed to create folder: ${t instanceof Error?t.message:"Unknown error"}`,"error")}}},[se,Je]=n.useState(""),[vt,F]=n.useState(!1),He=()=>{if(!se.trim())return;const t=re(i,se.trim());f(t),z(""),H(!0),Je(""),F(!1)},[xe,qe]=n.useState(null),fe=async t=>{qe(t),R({isOpen:!0,title:"Delete Item",message:`Are you sure you want to delete "${t.name}"?`,onConfirm:async()=>{if(xe)try{const s=new URL("/api/fs",window.location.origin);s.searchParams.set("path",xe.fullPath),await m(s.toString(),{method:"DELETE"}),x===xe.fullPath&&be(),await d(),h("Item deleted successfully","success")}catch(s){h(`Failed to delete: ${s instanceof Error?s.message:"Unknown error"}`,"error")}finally{qe(null),R({...w,isOpen:!1})}},variant:"danger"})},[U,_e]=n.useState(null),[E,pe]=n.useState(""),[Nt,C]=n.useState(!1),ye=async t=>{_e(t),pe(t.name),C(!0)},Ke=async()=>{if(!U||!E.trim()||E===U.name){C(!1);return}try{await m("/api/fs/rename",{method:"POST",body:JSON.stringify({path:U.fullPath,newName:E.trim()})}),await d(),h("Item renamed successfully","success")}catch(t){h(`Failed to rename: ${t instanceof Error?t.message:"Unknown error"}`,"error")}finally{_e(null),pe(""),C(!1)}},Ct=async()=>{if(x){S(!0);try{await m("/api/fs/write",{method:"POST",body:JSON.stringify({path:x,content:p})}),await d(),H(!1)}finally{S(!1)}}},be=()=>{f(null),z(""),H(!1),oe(!1)},Ve=t=>{ce(s=>{const a=new Set(s);return a.has(t.fullPath)?a.delete(t.fullPath):a.add(t.fullPath),a})},zt=()=>{const t=Array.isArray(I)?I:[],s=Array.isArray(M)?M:[],a=new Set([...t,...s].map(l=>l.fullPath));ce(a)},b=()=>{ce(new Set)},Ze=async t=>{if(t.isDirectory){const s=`${t.name}_${new Date().toISOString().slice(0,10)}.zip`,a=re(i||Ce(t.fullPath),s);try{await m("/api/fs/bulk/zip",{method:"POST",body:JSON.stringify({sourcePaths:[t.fullPath],zipFilePath:a})}),ne(a),setTimeout(async()=>{try{await m("/api/fs/bulk/delete",{method:"POST",body:JSON.stringify({paths:[a]})}),await d()}catch{}},2e3)}catch(l){h(`Failed to zip folder: ${l instanceof Error?l.message:String(l)}`,"error")}}else ne(t.fullPath)},St=async()=>{if(o.size===0)return;const t=Array.from(o);if(t.length===1){const a=N?.find(l=>l.fullPath===t[0]);a?await Ze(a):ne(t[0]);return}const s=new URL("/api/fs/download/bulk",window.location.origin);await fetch(s.toString(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paths:t})}).then(async a=>{if(a.ok){const l=await a.blob(),L=window.URL.createObjectURL(l),B=document.createElement("a");B.href=L,B.download=`download_${new Date().toISOString().slice(0,10)}.zip`,document.body.appendChild(B),B.click(),document.body.removeChild(B),window.URL.revokeObjectURL(L)}}),b(),await d()},[Pt,Xe]=n.useState(0),Qe=async()=>{o.size!==0&&(Xe(o.size),R({isOpen:!0,title:"Delete Items",message:`Are you sure you want to delete ${o.size} item(s)?`,onConfirm:async()=>{try{await m("/api/fs/bulk/delete",{method:"POST",body:JSON.stringify({paths:Array.from(o)})}),b(),await d(),h(`${Pt} item(s) deleted successfully`,"success")}catch(t){h(`Failed to delete items: ${t instanceof Error?t.message:"Unknown error"}`,"error")}finally{Xe(0),R({...w,isOpen:!1})}},variant:"danger"}))},Ge=()=>{o.size!==0&&A({items:Array.from(o),operation:"copy"})},Ye=()=>{o.size!==0&&A({items:Array.from(o),operation:"cut"})},et=async()=>{if(!(!g||!i))try{g.operation==="copy"?await m("/api/fs/bulk/copy",{method:"POST",body:JSON.stringify({sourcePaths:g.items,destinationPath:i})}):g.operation==="cut"&&(await m("/api/fs/bulk/move",{method:"POST",body:JSON.stringify({sourcePaths:g.items,destinationPath:i})}),A(null)),b(),await d()}catch(t){h(`Paste failed: ${t instanceof Error?t.message:"Unknown error"}`,"error")}},Dt=()=>{if(!i||j.includes(i))return;const t=[...j,i];De(t),localStorage.setItem("weasel.bookmarks",JSON.stringify(t))},tt=t=>{const a=(Array.isArray(j)?j:[]).filter(l=>l!==t);De(a),localStorage.setItem("weasel.bookmarks",JSON.stringify(a))},Ft=t=>{r(t),b(),de(!1)},ae=i&&j.includes(i),Et=async t=>{const s=window.prompt("Zip file name (e.g., archive.zip)",`${t.name}.zip`);if(!s)return;const a=re(i||Ce(t.fullPath),s);await m("/api/fs/bulk/zip",{method:"POST",body:JSON.stringify({sourcePaths:[t.fullPath],zipFilePath:a})}),await d()},Lt=async()=>{if(o.size===0)return;const t=window.prompt("Zip file name (e.g., archive.zip)","archive.zip");if(!t)return;const s=re(i,t);await m("/api/fs/bulk/zip",{method:"POST",body:JSON.stringify({sourcePaths:Array.from(o),zipFilePath:s})}),b(),await d()},st=async t=>{const s=i||Ce(t);await m("/api/fs/unzip",{method:"POST",body:JSON.stringify({zipFilePath:t,destinationPath:s})}),await d()},Ot=t=>{t.preventDefault(),t.stopPropagation(),Ee||_(!0)},At=t=>{t.preventDefault(),t.stopPropagation(),_(!0)},Tt=t=>{t.preventDefault(),t.stopPropagation(),t.currentTarget===t.target&&_(!1)},Rt=async t=>{if(t.preventDefault(),t.stopPropagation(),_(!1),!i){h("Select a folder before uploading files.","error");return}const s=Array.from(t.dataTransfer.files);if(s.length!==0)try{for(const a of s){const l=new FormData;l.append("path",ze(i)),l.append("file",a,a.name),await Ht(l)}await d()}catch(a){h(`Upload failed: ${a instanceof Error?a.message:"Unknown error"}`,"error")}},at=async t=>{Le(t),me(!0),K("");try{const s=new URL("/api/fs/content",window.location.origin);s.searchParams.set("path",t);const a=await fetch(s.toString());if(a.ok){const l=await a.text();K(l)}}catch(s){console.error("Failed to load file content:",s)}},It=()=>{Le(null),me(!1),K("")};n.useEffect(()=>{if(!P||!T)return;const t=setInterval(async()=>{try{const s=new URL("/api/fs/content",window.location.origin);s.searchParams.set("path",T);const a=await fetch(s.toString());if(a.ok){const l=await a.text();K(l)}}catch(s){console.error("Failed to refresh tail content:",s)}},2e3);return()=>clearInterval(t)},[P,T]);const Mt=n.useCallback(()=>{Oe(!0)},[]),ge=n.useCallback(()=>{Oe(!1),localStorage.setItem("weasel.layout.leftPanelWidth",ue.toString())},[ue]),je=n.useRef(null),ke=n.useCallback(t=>{if(!X||!je.current)return;const s=je.current.getBoundingClientRect(),a=(t.clientX-s.left)/s.width*100;a>=20&&a<=70&&(jt(a),localStorage.setItem("weasel.layout.leftPanelWidth",a.toString()))},[X]);n.useEffect(()=>(X&&(window.addEventListener("mousemove",ke),window.addEventListener("mouseup",ge)),()=>{window.removeEventListener("mousemove",ke),window.removeEventListener("mouseup",ge)}),[X,ke,ge]);const nt=(t,s)=>{t.preventDefault(),t.stopPropagation(),Z({x:t.clientX,y:t.clientY,item:s})},it=n.useMemo(()=>he.find(t=>i.startsWith(t.fullPath))?.fullPath||null,[i,he]);return e.jsxs("section",{className:"space-y-4 relative",onDragOver:Ot,onDragEnter:At,onDragLeave:Tt,onDrop:Rt,children:[Ee&&i&&e.jsx("div",{className:"fixed inset-0 bg-sky-900/30 backdrop-blur-sm z-50 flex items-center justify-center pointer-events-none",children:e.jsxs("div",{className:"bg-slate-800 border-4 border-dashed border-sky-500 rounded-lg p-8 shadow-2xl",children:[e.jsx(ot,{size:48,className:"mx-auto mb-4 text-sky-400"}),e.jsx("p",{className:"text-xl font-semibold text-white",children:"Drop files to upload"}),e.jsxs("p",{className:"text-sm text-slate-400 mt-2",children:["to ",i]})]})}),e.jsxs("div",{className:"submenu-container",children:[e.jsxs("button",{className:`submenu-tab ${it?"":"active"}`,onClick:()=>{r(""),b()},children:[e.jsx(ie,{size:16}),"Home"]}),he.map(t=>e.jsxs("button",{className:`submenu-tab ${it===t.fullPath?"active":""}`,onClick:()=>{r(t.fullPath),b()},children:[e.jsx(Ut,{size:16}),t.name]},t.fullPath))]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-end gap-2 flex-wrap",children:[o.size>0&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn-outline",onClick:St,children:e.jsx(we,{size:16})}),e.jsx("button",{className:"btn-outline",onClick:Qe,children:e.jsx(le,{size:16})}),e.jsx("button",{className:"btn-outline",onClick:Lt,children:e.jsx(mt,{size:16})}),e.jsx("button",{className:"btn-outline",onClick:Ge,children:e.jsx(ht,{size:16})}),e.jsx("button",{className:"btn-outline",onClick:Ye,children:e.jsx(ft,{size:16})}),e.jsx("button",{className:"btn-outline",onClick:b,children:e.jsx(O,{size:16})})]}),g&&e.jsx("button",{className:"btn-outline bg-sky-900/30 border-sky-500",onClick:et,disabled:!i,children:e.jsx(Kt,{size:16})})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-900/50 p-2 rounded border border-slate-800 overflow-hidden",children:[e.jsxs("span",{className:"text-slate-500 flex-shrink-0",children:[V("common.path"),":"]}),e.jsxs("div",{className:"flex items-center gap-1 flex-1 min-w-0 overflow-hidden",children:[e.jsx("button",{className:"text-sm font-medium text-sky-400 hover:text-sky-300 hover:underline flex-shrink-0",onClick:()=>{r(""),b()},title:"Go to root",children:"Home"}),i&&i.split("\\").filter(Boolean).map((t,s,a)=>{const l=a.slice(0,s+1).join("\\")+"\\",L=s===a.length-1;return e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 min-w-0",children:[e.jsx("span",{className:"text-slate-500 flex-shrink-0",children:"/"}),e.jsx("button",{className:`text-sm font-medium truncate max-w-[150px] ${L?"text-white":"text-sky-400 hover:text-sky-300 hover:underline"}`,onClick:()=>{L||(r(l),b())},disabled:L,title:l,children:t})]},s)})]}),o.size>0&&e.jsxs("span",{className:"text-xs text-sky-400 flex-shrink-0 bg-sky-900/20 px-2 py-1 rounded",children:[o.size," ",V("files.selected")]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:k,onChange:t=>Fe(t.target.value),placeholder:V("common.search"),className:"px-3 py-2 bg-slate-800 border border-slate-700 rounded text-sm w-64 focus:outline-none focus:border-sky-500 pl-9"}),e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:e.jsx(_t,{size:14})}),k&&e.jsx("button",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 hover:text-white",onClick:()=>Fe(""),title:"Clear search",children:e.jsx(O,{size:16})})]})}),e.jsxs("div",{className:"flex gap-2 flex-wrap justify-end",children:[e.jsx("div",{className:"relative",children:e.jsx("button",{className:`btn-outline ${ae?"bg-amber-900/30 border-amber-500":""}`,onClick:()=>{ae?tt(i):Dt()},disabled:!i,title:ae?"Remove bookmark":"Add bookmark",children:ae?e.jsx(pt,{size:16,className:"fill-amber-400 text-amber-400"}):e.jsx(Vt,{size:16})})}),j.length>0&&e.jsxs("div",{className:"relative",children:[e.jsx("button",{className:"btn-outline",onClick:()=>de(!q),title:"Show bookmarks",children:e.jsx(pt,{size:16})}),q&&e.jsxs("div",{className:"absolute top-full right-0 mt-2 w-80 bg-slate-800 border border-slate-700 rounded shadow-lg z-50 max-h-96 overflow-y-auto",children:[e.jsx("div",{className:"p-3 border-b border-slate-700",children:e.jsx("h4",{className:"font-semibold text-sm",children:"Bookmarked Folders"})}),e.jsx("div",{className:"divide-y divide-slate-700",children:Array.isArray(j)&&j.map(t=>e.jsxs("div",{className:"flex items-center gap-2 p-3 hover:bg-slate-700/50",children:[e.jsxs("button",{className:"flex-1 text-left text-sm hover:text-sky-400 break-all",onClick:()=>Ft(t),children:[e.jsx(ie,{size:14,className:"inline mr-2 text-amber-300"}),t||"Root"]}),e.jsx("button",{className:"icon-btn text-red-400 hover:text-red-300",onClick:()=>tt(t),title:"Remove bookmark",children:e.jsx(O,{size:14})})]},t))})]})]})]})]})]}),Te&&e.jsxs("p",{className:"text-red-400 text-sm",children:["Failed to load items: ",String(Te)]}),e.jsxs("div",{ref:je,className:"flex flex-row gap-2",style:{height:"calc(100vh - 140px)",minHeight:"600px"},children:[e.jsxs("div",{className:"panel flex flex-col overflow-hidden",style:{width:`${ue}%`,minWidth:"250px"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"panel-title mb-0",children:"Folders"}),e.jsx("button",{className:"icon-btn",onClick:()=>D(!0),title:"New Folder",children:e.jsx(ct,{size:16})}),e.jsx("button",{className:"icon-btn",onClick:d,title:"Refresh",children:e.jsx(dt,{size:16})})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-400",children:[e.jsxs("button",{className:"hover:text-white flex items-center gap-1",onClick:()=>$("name"),children:["Name ",u.key==="name"&&(u.direction==="asc"?e.jsx(W,{size:12}):e.jsx(J,{size:12}))]}),e.jsxs("button",{className:"hover:text-white flex items-center gap-1",onClick:()=>$("date"),children:["Date ",u.key==="date"&&(u.direction==="asc"?e.jsx(W,{size:12}):e.jsx(J,{size:12}))]})]})]}),e.jsxs("div",{className:"divide-y divide-slate-800 overflow-y-auto flex-1 pr-2",children:[Q&&e.jsx("p",{className:"py-4 text-sm text-slate-400",children:"Loading…"}),!Q&&I.length===0&&e.jsx("p",{className:"py-4 text-sm text-slate-400",children:"No folders"}),Array.isArray(I)&&I.map(t=>e.jsxs("div",{className:`item-row hover:bg-slate-800/50 cursor-pointer ${o.has(t.fullPath)?"bg-slate-800/70":""}`,onClick:s=>{s.target.closest('input[type="checkbox"]')||s.target.closest("button")||$e(t)},onContextMenu:s=>nt(s,t),children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("input",{type:"checkbox",checked:o.has(t.fullPath),onChange:s=>{s.stopPropagation(),Ve(t)},className:"checkbox flex-shrink-0",onClick:s=>s.stopPropagation()}),e.jsx(ie,{size:18,className:"text-amber-300 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:t.name}),e.jsx("p",{className:"text-xs text-slate-400",children:rt(t.modifiedAt)})]})]}),e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{className:"icon-btn",onClick:s=>{s.stopPropagation(),ye(t)},title:"Rename",children:e.jsx(Ne,{size:14})}),e.jsx("button",{className:"icon-btn text-red-400 hover:text-red-300",onClick:s=>{s.stopPropagation(),fe(t)},title:"Delete",children:e.jsx(le,{size:14})})]})]},t.fullPath))]})]}),e.jsx("div",{className:"w-2 cursor-col-resize bg-slate-900 hover:bg-sky-500/50 transition-colors flex items-center justify-center z-10 flex-shrink-0 rounded",onMouseDown:Mt,children:e.jsx("div",{className:"h-8 w-1 bg-slate-600 rounded-full"})}),e.jsxs("div",{className:"panel flex-1 flex flex-col overflow-hidden",style:{minWidth:"400px"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"panel-title mb-0",children:V("files.files")}),e.jsx("button",{className:"icon-btn",onClick:()=>F(!0),title:"New File",children:e.jsx(ct,{size:16})}),e.jsx("button",{className:"icon-btn",onClick:()=>document.getElementById("file-upload-input")?.click(),title:"Upload",children:e.jsx(ot,{size:16})}),e.jsx("button",{className:"icon-btn",onClick:d,title:"Refresh",children:e.jsx(dt,{size:16})})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-400",children:[e.jsxs("button",{className:"hover:text-white flex items-center gap-1",onClick:()=>$("name"),children:["Name ",u.key==="name"&&(u.direction==="asc"?e.jsx(W,{size:12}):e.jsx(J,{size:12}))]}),e.jsxs("button",{className:"hover:text-white flex items-center gap-1",onClick:()=>$("size"),children:["Size ",u.key==="size"&&(u.direction==="asc"?e.jsx(W,{size:12}):e.jsx(J,{size:12}))]}),e.jsxs("button",{className:"hover:text-white flex items-center gap-1",onClick:()=>$("date"),children:["Date ",u.key==="date"&&(u.direction==="asc"?e.jsx(W,{size:12}):e.jsx(J,{size:12}))]})]})]}),e.jsxs("div",{className:"divide-y divide-slate-800 overflow-y-auto flex-1 pr-2",children:[Q&&e.jsx("p",{className:"py-4 text-sm text-slate-400",children:"Loading…"}),!Q&&M.length===0&&e.jsx("p",{className:"py-4 text-sm text-slate-400",children:"No files"}),Array.isArray(M)&&M.map(t=>{const s=t.name.toLowerCase().endsWith(".zip");return e.jsxs("div",{className:`item-row hover:bg-slate-800/50 cursor-default group ${o.has(t.fullPath)?"bg-slate-800/70":""}`,onContextMenu:a=>nt(a,t),children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("input",{type:"checkbox",checked:o.has(t.fullPath),onChange:()=>Ve(t),className:"checkbox flex-shrink-0",onClick:a=>a.stopPropagation()}),s?e.jsx(ve,{size:18,className:"text-purple-300 flex-shrink-0"}):e.jsx(Bt,{size:18,className:"text-sky-300 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:t.name}),e.jsxs("p",{className:"text-xs text-slate-400",children:[Wt(t.sizeBytes)," – ",rt(t.modifiedAt)]})]})]}),e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{className:"icon-btn",onClick:a=>{a.stopPropagation(),ne(t.fullPath)},title:"Download",children:e.jsx(we,{size:14})}),s&&e.jsx("button",{className:"icon-btn",onClick:a=>{a.stopPropagation(),st(t.fullPath)},title:"Unzip",children:e.jsx(ve,{size:14})}),!s&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"icon-btn",onClick:a=>{a.stopPropagation(),Ue(t)},title:"Edit",children:e.jsx(xt,{size:14})}),e.jsx("button",{className:"icon-btn",onClick:a=>{a.stopPropagation(),at(t.fullPath)},title:"Tail",children:e.jsx(ut,{size:14})})]}),e.jsx("button",{className:"icon-btn",onClick:a=>{a.stopPropagation(),ye(t)},title:"Rename",children:e.jsx(Ne,{size:14})}),e.jsx("button",{className:"icon-btn text-red-400 hover:text-red-300",onClick:a=>{a.stopPropagation(),fe(t)},title:"Delete",children:e.jsx(le,{size:14})})]})]},t.fullPath)})]})]})]}),x&&e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400 uppercase tracking-[0.2em]",children:"Editing"}),e.jsx("p",{className:"font-semibold text-white break-all",children:x})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"btn-outline",onClick:be,children:"Close"}),e.jsx("button",{className:"btn-primary",onClick:Ct,disabled:y||Se&&!Pe,children:y?"Saving…":"Save"})]})]}),e.jsx("div",{className:"modal-body",children:Se&&!Pe?e.jsx("p",{className:"text-sm text-slate-400",children:"Loading content…"}):e.jsx(n.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-[400px] bg-slate-900 rounded border border-slate-800",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-sky-500 border-t-transparent rounded-full animate-spin mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Loading editor..."})]})}),children:e.jsx(Xt,{height:"400px",theme:"vs-dark",language:Yt(x),value:p,onChange:t=>z(t??""),options:{minimap:{enabled:!1},fontSize:14,scrollBeyondLastLine:!1}})})})]})}),T&&e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-slate-400 uppercase tracking-[0.2em]",children:["Monitoring File ",P&&e.jsx("span",{className:"text-green-400 ml-2",children:"● Live"})]}),e.jsx("p",{className:"font-semibold text-white break-all",children:T})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:`btn-outline ${P?"bg-amber-900/30 border-amber-500":"bg-green-900/30 border-green-500"}`,onClick:()=>me(!P),children:P?"Pause":"Resume"}),e.jsx("button",{className:"btn-outline",onClick:It,children:"Close"})]})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("pre",{className:"text-sm font-mono whitespace-pre-wrap break-all bg-slate-900 p-4 rounded max-h-96 overflow-y-auto",children:bt||"Loading..."}),e.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Auto-refreshing every 2 seconds"})]})]})}),c&&e.jsx(Zt,{x:c.x,y:c.y,onClose:()=>Z(null),items:[...c.item.isDirectory?[{label:"Open",icon:e.jsx(ie,{size:14}),onClick:()=>$e(c.item)}]:[],{label:"Download",icon:e.jsx(we,{size:14}),onClick:()=>Ze(c.item)},{label:"Zip",icon:e.jsx(mt,{size:14}),onClick:()=>Et(c.item)},...!c.item.isDirectory&&!c.item.name.endsWith(".zip")?[{label:"Edit",icon:e.jsx(xt,{size:14}),onClick:()=>Ue(c.item)},{label:"Tail",icon:e.jsx(ut,{size:14}),onClick:()=>at(c.item.fullPath)}]:[],{label:"Copy",icon:e.jsx(ht,{size:14}),onClick:()=>{A({items:[c.item.fullPath],operation:"copy"}),Z(null)}},{label:"Cut",icon:e.jsx(ft,{size:14}),onClick:()=>{A({items:[c.item.fullPath],operation:"cut"}),Z(null)}},...c.item.name.endsWith(".zip")?[{label:"Unzip",icon:e.jsx(ve,{size:14}),onClick:()=>st(c.item.fullPath)}]:[],{label:"Rename",icon:e.jsx(Ne,{size:14}),onClick:()=>ye(c.item)},{label:"Delete",icon:e.jsx(le,{size:14}),onClick:()=>fe(c.item),danger:!0}]}),e.jsx(Jt,{isOpen:w.isOpen,title:w.title,message:w.message,onConfirm:w.onConfirm,onCancel:()=>R({...w,isOpen:!1}),variant:w.variant}),wt&&e.jsx("div",{className:"modal-backdrop",onClick:()=>D(!1),children:e.jsxs("div",{className:"modal",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Create Folder"}),e.jsx("button",{className:"icon-btn",onClick:()=>D(!1),children:e.jsx(O,{size:16})})]}),e.jsx("div",{className:"modal-body",children:e.jsx("input",{className:"input-text w-full",placeholder:"Folder name",value:te,onChange:t=>Be(t.target.value),onKeyDown:t=>{t.key==="Enter"?We():t.key==="Escape"&&D(!1)},autoFocus:!0})}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{className:"btn-outline",onClick:()=>D(!1),children:"Cancel"}),e.jsx("button",{className:"btn-primary",onClick:We,disabled:!te.trim(),children:"Create"})]})]})}),vt&&e.jsx("div",{className:"modal-backdrop",onClick:()=>F(!1),children:e.jsxs("div",{className:"modal",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Create File"}),e.jsx("button",{className:"icon-btn",onClick:()=>F(!1),children:e.jsx(O,{size:16})})]}),e.jsx("div",{className:"modal-body",children:e.jsx("input",{className:"input-text w-full",placeholder:"File name (e.g. notes.txt)",value:se,onChange:t=>Je(t.target.value),onKeyDown:t=>{t.key==="Enter"?He():t.key==="Escape"&&F(!1)},autoFocus:!0})}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{className:"btn-outline",onClick:()=>F(!1),children:"Cancel"}),e.jsx("button",{className:"btn-primary",onClick:He,disabled:!se.trim(),children:"Create"})]})]})}),Nt&&U&&e.jsx("div",{className:"modal-backdrop",onClick:()=>C(!1),children:e.jsxs("div",{className:"modal",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Rename"}),e.jsx("button",{className:"icon-btn",onClick:()=>C(!1),children:e.jsx(O,{size:16})})]}),e.jsx("div",{className:"modal-body",children:e.jsx("input",{className:"input-text w-full",value:E,onChange:t=>pe(t.target.value),onKeyDown:t=>{t.key==="Enter"?Ke():t.key==="Escape"&&C(!1)},autoFocus:!0})}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{className:"btn-outline",onClick:()=>C(!1),children:"Cancel"}),e.jsx("button",{className:"btn-primary",onClick:Ke,disabled:!E.trim()||E===U.name,children:"Rename"})]})]})})]})}export{cs as default};
