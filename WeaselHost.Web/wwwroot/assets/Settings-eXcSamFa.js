import{c as D,u as _,r as i,a as f,b as u,j as e,S as le,F as K,M as P,L as re,i as R,C as ce,s as o,e as oe}from"./index-DU2Y9Ptq.js";import{F as z,S as w,a as Q}from"./FolderPicker-bFbHw8mE.js";import{E as me}from"./eye-BXTSpoIo.js";import"./vendor-terminal-Co9mG8Of.js";import"./vendor-utils-BeCPKUKe.js";import"./folder-_PYrDCel.js";/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=D("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=D("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=D("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=D("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),pe=()=>u("/api/settings/capture"),ue=()=>u("/api/settings/security"),ge=()=>u("/api/settings/mail"),he=()=>u("/api/system/startup"),be=()=>u("/api/system/admin/status");function Pe(){const{t,language:h,setLanguage:N}=_(),[a,r]=i.useState("general");i.useEffect(()=>{const s=()=>{const p=window.location.hash.slice(1);if(!p)return;const T=p.split("/").filter(Boolean);if(T[0]==="settings"&&T[1]){const H=T[1];["general","security","mail","logging","screenshots","vnc"].includes(H)&&r(H)}};return s(),window.addEventListener("hashchange",s),()=>window.removeEventListener("hashchange",s)},[]),i.useEffect(()=>{const p=window.location.hash.slice(1).split("/").filter(Boolean);p[0]==="settings"&&p[1]!==a&&(window.location.hash=`/settings/${a}`)},[a]);const{data:g,mutate:j}=f("capture-settings",pe),{data:m,mutate:y}=f("startup-status",he),{data:c,mutate:n}=f("admin-status",be),[l,d]=i.useState({folder:"",filenamePattern:"",enableIntervalCapture:!1,intervalSeconds:60}),[X,E]=i.useState(!1),[$,I]=i.useState(!1),{data:L,mutate:Y}=f("security-settings",ue),[b,k]=i.useState({requireAuthentication:!1,password:"",confirmPassword:""}),[O,q]=i.useState(!1),{data:C,mutate:Z}=f("smtp-settings",ge),[x,v]=i.useState({host:"smtp.gmail.com",port:587,enableSsl:!0,username:"",password:"",fromAddress:"",fromName:"Weasel Disk Monitor",testRecipient:""}),[G,W]=i.useState(!1),[B,V]=i.useState(!1),[F,J]=i.useState(""),[S,A]=i.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{},variant:"info"});i.useEffect(()=>{g&&d({folder:g.folder||"",filenamePattern:g.filenamePattern||"",enableIntervalCapture:!1,intervalSeconds:60})},[g]),i.useEffect(()=>{L&&k(s=>({...s,requireAuthentication:L.requireAuthentication}))},[L]),i.useEffect(()=>{C&&(v(C),C.testRecipient&&J(C.testRecipient))},[C]);const ee=async()=>{I(!0);try{await u("/api/settings/capture",{method:"PUT",body:JSON.stringify({folder:l.folder,filenamePattern:l.filenamePattern,enableIntervalCapture:g?.enableIntervalCapture||!1,intervalSeconds:g?.intervalSeconds||60})}),await j(),o(t("common.success"),"success")}catch(s){o(`${t("common.error")}: ${s instanceof Error?s.message:String(s)}`,"error")}finally{I(!1)}},se=async s=>{try{await u("/api/system/startup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:s})}),await y(),o(t("common.success"),"success")}catch(p){o(`${t("common.error")}: ${p instanceof Error?p.message:String(p)}`,"error")}},te=async()=>{A({isOpen:!0,title:"Restart as Administrator",message:t("system.restartAdmin")+"?",onConfirm:async()=>{try{await u("/api/system/admin/restart",{method:"POST"}),o("Restarting as administrator...","success")}catch(s){o(`${t("common.error")}: ${s instanceof Error?s.message:String(s)}`,"error")}finally{A({...S,isOpen:!1})}},variant:"warning"})},ae=async()=>{if(b.password!==b.confirmPassword){o("Passwords do not match","error");return}q(!0);try{await u("/api/settings/security",{method:"PUT",body:JSON.stringify({requireAuthentication:b.requireAuthentication,password:b.password||null})}),k(s=>({...s,password:"",confirmPassword:""})),await Y(),o(t("common.success"),"success")}catch(s){o(`${t("common.error")}: ${s instanceof Error?s.message:String(s)}`,"error")}finally{q(!1)}},ne=async()=>{W(!0);try{await u("/api/settings/mail",{method:"PUT",body:JSON.stringify({...x,testRecipient:F})}),await Z(),o(t("common.success"),"success")}catch(s){o(`${t("common.error")}: ${s instanceof Error?s.message:String(s)}`,"error")}finally{W(!1)}},ie=async()=>{if(!F){o("Please enter a recipient email address","error");return}V(!0);try{await u("/api/settings/mail/test",{method:"POST",body:JSON.stringify({recipient:F})}),o("Test email sent successfully","success")}catch(s){const p=s instanceof Error?s.message:String(s);o(`Failed to send test email: ${p}`,"error")}finally{V(!1)}};return e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"submenu-container",children:[e.jsxs("button",{onClick:()=>r("general"),className:`submenu-tab ${a==="general"?"active":""}`,children:[e.jsx(le,{size:16}),t("settings.general")]}),e.jsxs("button",{onClick:()=>r("security"),className:`submenu-tab ${a==="security"?"active":""}`,children:[e.jsx(M,{size:16}),t("settings.security")]}),e.jsxs("button",{onClick:()=>r("mail"),className:`submenu-tab ${a==="mail"?"active":""}`,children:[e.jsx(U,{size:16}),t("settings.mail")]}),e.jsxs("button",{onClick:()=>r("logging"),className:`submenu-tab ${a==="logging"?"active":""}`,children:[e.jsx(K,{size:16}),"Logging"]}),e.jsxs("button",{onClick:()=>r("screenshots"),className:`submenu-tab ${a==="screenshots"?"active":""}`,children:[e.jsx(z,{size:16}),"Screenshots"]}),e.jsxs("button",{onClick:()=>r("vnc"),className:`submenu-tab ${a==="vnc"?"active":""}`,children:[e.jsx(P,{size:16}),"VNC"]})]}),a==="general"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"panel",children:[e.jsxs("h3",{className:"panel-title flex items-center gap-2",children:[e.jsx(P,{size:18})," Application"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:t("settings.language")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{size:16,className:"text-slate-500"}),e.jsxs("select",{className:"input-text",value:h,onChange:s=>N(s.target.value),children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"de",children:"Deutsch"}),e.jsx("option",{value:"fr",children:"Français"}),e.jsx("option",{value:"nl",children:"Nederlands"})]})]})]})}),e.jsxs("div",{className:"space-y-3 pt-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-900/50 rounded-lg border border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(M,{size:18,className:c?.isAdministrator?"text-green-400":"text-amber-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white",children:t("settings.runAsAdmin")}),e.jsx("p",{className:"text-xs text-slate-400",children:c?.isAdministrator?t("system.admin"):t("system.standard")})]})]}),!c?.isAdministrator&&e.jsx("button",{className:"btn-outline text-xs",onClick:te,children:t("system.restartAdmin")})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-900/50 rounded-lg border border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(P,{size:18,className:m?.enabled?"text-green-400":"text-slate-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white",children:t("settings.startWithWindows")}),e.jsx("p",{className:"text-xs text-slate-400",children:m?.enabled?"Enabled":"Disabled"})]})]}),e.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in",children:[e.jsx("input",{type:"checkbox",name:"toggle",id:"startup-toggle",className:"toggle-checkbox absolute block w-5 h-5 rounded-full bg-white border-4 appearance-none cursor-pointer",checked:m?.enabled||!1,onChange:s=>se(s.target.checked),style:{right:m?.enabled?"0":"auto",left:m?.enabled?"auto":"0",borderColor:m?.enabled?"#3b82f6":"#cbd5e1"}}),e.jsx("label",{htmlFor:"startup-toggle",className:`toggle-label block overflow-hidden h-5 rounded-full cursor-pointer ${m?.enabled?"bg-blue-500":"bg-slate-300"}`})]})]})]})]})]})}),a==="security"&&e.jsxs("div",{className:"panel",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"panel-title flex items-center gap-2 mb-0",children:[e.jsx(re,{size:18})," ",t("settings.authentication")]}),e.jsxs("button",{className:"btn-primary",onClick:ae,disabled:O,children:[e.jsx(w,{size:16})," ",t(O?"common.loading":"common.save")]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"requireAuth",className:"checkbox",checked:b.requireAuthentication,onChange:s=>k({...b,requireAuthentication:s.target.checked})}),e.jsx("label",{htmlFor:"requireAuth",className:"text-sm text-slate-300",children:t("settings.requireAuth")})]}),e.jsxs("div",{className:"space-y-2 pt-2 border-t border-slate-800",children:[e.jsx("p",{className:"text-sm font-medium text-slate-300",children:t("settings.changePassword")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"New Password"}),e.jsx("input",{type:"password",className:"input-text",value:b.password,onChange:s=>k({...b,password:s.target.value}),placeholder:"Leave empty to keep current"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Confirm Password"}),e.jsx("input",{type:"password",className:"input-text",value:b.confirmPassword,onChange:s=>k({...b,confirmPassword:s.target.value}),placeholder:"Confirm new password"})]})]})]})]})]}),a==="mail"&&e.jsxs("div",{className:"panel",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"panel-title flex items-center gap-2 mb-0",children:[e.jsx(U,{size:18})," ",t("settings.smtpSettings")]}),e.jsxs("button",{className:"btn-primary",onClick:ne,disabled:G,children:[e.jsx(w,{size:16})," ",t(G?"common.loading":"common.save")]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-slate-300",children:t("settings.host")}),e.jsx("input",{className:"input-text",value:x.host,onChange:s=>v({...x,host:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-slate-300",children:t("settings.port")}),e.jsx("input",{type:"number",className:"input-text",value:x.port,onChange:s=>v({...x,port:Number(s.target.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-slate-300",children:t("settings.username")}),e.jsx("input",{className:"input-text",value:x.username||"",onChange:s=>v({...x,username:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-slate-300",children:t("settings.password")}),e.jsx("input",{type:"password",className:"input-text",value:x.password||"",onChange:s=>v({...x,password:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-slate-300",children:t("settings.senderEmail")}),e.jsx("input",{className:"input-text",value:x.fromAddress||"",onChange:s=>v({...x,fromAddress:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-slate-300",children:t("settings.senderName")}),e.jsx("input",{className:"input-text",value:x.fromName||"",onChange:s=>v({...x,fromName:s.target.value})})]}),e.jsxs("div",{className:"md:col-span-2 flex items-center gap-2 pt-2",children:[e.jsx("input",{type:"checkbox",id:"enableSsl",className:"checkbox",checked:x.enableSsl,onChange:s=>v({...x,enableSsl:s.target.checked})}),e.jsx("label",{htmlFor:"enableSsl",className:"text-sm text-slate-300",children:t("settings.useSsl")})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-slate-800",children:[e.jsx("h4",{className:"text-sm font-medium text-white mb-3",children:t("settings.sendTestEmail")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"input-text flex-1",placeholder:t("settings.recipient"),value:F,onChange:s=>J(s.target.value)}),e.jsxs("button",{className:"btn-outline",onClick:ie,disabled:B,children:[e.jsx(xe,{size:16})," ",t(B?"common.loading":"settings.sendTestEmail")]})]})]})]}),a==="logging"&&e.jsx(je,{}),a==="screenshots"&&e.jsxs("div",{className:"panel",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"panel-title flex items-center gap-2 mb-0",children:[e.jsx(z,{size:18})," Screenshots"]}),e.jsxs("button",{className:"btn-primary",onClick:ee,disabled:$,children:[e.jsx(w,{size:16})," ",t($?"common.loading":"common.save")]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-slate-300",children:t("settings.destinationFolder")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"flex-1 bg-slate-900 border border-slate-800 rounded px-3 py-2 text-sm text-white",value:R(l.folder),onChange:s=>{const p=s.target.value.replace(/\\\\/g,"\\");d({...l,folder:p})}}),e.jsx("button",{className:"btn-outline",type:"button",onClick:()=>E(!0),children:e.jsx(z,{size:16})})]})]}),X&&e.jsx(Q,{initialPath:l.folder,onSelect:s=>{const p=s.replace(/\\\\/g,"\\");d({...l,folder:p}),E(!1)},onCancel:()=>E(!1)}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-slate-300",children:t("settings.filenamePattern")}),e.jsx("input",{className:"input-text",value:l.filenamePattern,onChange:s=>d({...l,filenamePattern:s.target.value}),placeholder:"screenshot_{timestamp}.png"}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Example: ",R(l.folder),"\\",(l.filenamePattern||"screenshot_{timestamp}.png").replace("{timestamp}",new Date().toISOString().replace(/[-:T.]/g,"").slice(0,14))]})]})]})]}),a==="vnc"&&e.jsx(ve,{}),e.jsx(ce,{isOpen:S.isOpen,title:S.title,message:S.message,onConfirm:S.onConfirm,onCancel:()=>A(s=>({...s,isOpen:!1})),variant:S.variant})]})}function je(){const t=()=>u("/api/settings/logging"),{data:h,mutate:N}=f("logging-settings",t),[a,r]=i.useState({folder:"",retentionDays:14,minimumLevel:"Information",maxFileSizeBytes:10*1024*1024,maxFilesPerDay:5,enableSizeRotation:!0,componentEnabled:{VNC:!0,DiskMonitor:!0,ApplicationMonitor:!0,Screenshots:!0,General:!0},componentLevels:{}}),[g,j]=i.useState(!1),[m,y]=i.useState(!1);i.useEffect(()=>{h&&r({...h,componentEnabled:h.componentEnabled||{VNC:!0,DiskMonitor:!0,ApplicationMonitor:!0,Screenshots:!0,General:!0},componentLevels:h.componentLevels||{}})},[h]);const c=async()=>{y(!0);try{await u("/api/settings/logging",{method:"PUT",body:JSON.stringify(a)}),await N(),o("Logging settings saved!","success")}catch(n){console.error("Failed to save logging settings:",n),o(`Failed to save logging settings: ${n instanceof Error?n.message:String(n)}`,"error")}finally{y(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"panel",children:[e.jsxs("h3",{className:"panel-title flex items-center gap-2",children:[e.jsx(K,{size:18})," Log File Rotation"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Log Folder"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"input-text flex-1",value:R(a.folder),onChange:n=>{const l=n.target.value.replace(/\\\\/g,"\\");r({...a,folder:l})}}),e.jsx("button",{className:"btn-outline",type:"button",onClick:()=>j(!0),children:e.jsx(z,{size:16})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Retention Days"}),e.jsx("input",{type:"number",className:"input-text",min:"0",value:a.retentionDays,onChange:n=>r({...a,retentionDays:parseInt(n.target.value)||0})}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"How many days to keep log files (0 = keep forever)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Minimum Log Level"}),e.jsxs("select",{className:"input-text",value:a.minimumLevel,onChange:n=>r({...a,minimumLevel:n.target.value}),children:[e.jsx("option",{value:"Trace",children:"Trace"}),e.jsx("option",{value:"Debug",children:"Debug"}),e.jsx("option",{value:"Information",children:"Information"}),e.jsx("option",{value:"Warning",children:"Warning"}),e.jsx("option",{value:"Error",children:"Error"}),e.jsx("option",{value:"Critical",children:"Critical"}),e.jsx("option",{value:"None",children:"None"})]})]})]}),e.jsxs("div",{className:"pt-2 border-t border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("input",{type:"checkbox",id:"enableSizeRotation",className:"checkbox",checked:a.enableSizeRotation,onChange:n=>r({...a,enableSizeRotation:n.target.checked})}),e.jsx("label",{htmlFor:"enableSizeRotation",className:"text-sm text-slate-300",children:"Enable size-based rotation"})]}),a.enableSizeRotation&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pl-6 border-l-2 border-slate-800",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Max File Size (MB)"}),e.jsx("input",{type:"number",className:"input-text",min:"1",step:"1",value:Math.round(a.maxFileSizeBytes/(1024*1024)),onChange:n=>{const l=parseInt(n.target.value)||1;r({...a,maxFileSizeBytes:l*1024*1024})}}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Current: ",oe(a.maxFileSizeBytes)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Max Files Per Day"}),e.jsx("input",{type:"number",className:"input-text",min:"0",value:a.maxFilesPerDay,onChange:n=>r({...a,maxFilesPerDay:parseInt(n.target.value)||0})}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Maximum rotated files to keep per day (0 = unlimited)"})]})]})]}),e.jsx("div",{className:"pt-4 border-t border-slate-800",children:e.jsxs("button",{className:"btn-primary",onClick:c,disabled:m,children:[e.jsx(w,{size:16})," ",m?"Saving…":"Save Logging Settings"]})})]})]}),e.jsxs("div",{className:"panel",children:[e.jsxs("h3",{className:"panel-title flex items-center gap-2",children:[e.jsx(P,{size:18})," Component Logging"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-slate-400",children:"Enable or disable logging for specific components. Each component writes to its own log file in a subfolder."}),e.jsx("div",{className:"space-y-3",children:["VNC","DiskMonitor","ApplicationMonitor","Screenshots","General"].map(n=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-900/50 rounded border border-slate-800",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-300 cursor-pointer",htmlFor:`component-${n}`,children:n}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[n==="VNC"&&"VNC server and connection logs",n==="DiskMonitor"&&"Disk and folder monitoring logs",n==="ApplicationMonitor"&&"Application monitoring and restart logs",n==="Screenshots"&&"Screenshot capture and interval logs",n==="General"&&"General application logs"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("select",{className:"input-text text-xs py-1 w-24",value:a.componentLevels?.[n]||a.minimumLevel,onChange:l=>{r({...a,componentLevels:{...a.componentLevels,[n]:l.target.value}})},onClick:l=>l.stopPropagation(),children:[e.jsx("option",{value:"Trace",children:"Trace"}),e.jsx("option",{value:"Debug",children:"Debug"}),e.jsx("option",{value:"Information",children:"Info"}),e.jsx("option",{value:"Warning",children:"Warn"}),e.jsx("option",{value:"Error",children:"Error"}),e.jsx("option",{value:"Critical",children:"Critical"}),e.jsx("option",{value:"None",children:"None"})]}),e.jsx("input",{type:"checkbox",id:`component-${n}`,className:"checkbox",checked:a.componentEnabled?.[n]??!0,onChange:l=>{r({...a,componentEnabled:{...a.componentEnabled,[n]:l.target.checked}})}})]})]},n))}),e.jsx("div",{className:"pt-4 border-t border-slate-800",children:e.jsxs("button",{className:"btn-primary",onClick:c,disabled:m,children:[e.jsx(w,{size:16})," ",m?"Saving…":"Save Component Settings"]})})]})]}),g&&e.jsx(Q,{initialPath:a.folder,onSelect:n=>{const l=n.replace(/\\\\/g,"\\");r({...a,folder:l}),j(!1)},onCancel:()=>j(!1)})]})}function ve(){const{t}=_(),[h,N]=i.useState(!1),[a,r]=i.useState(!1),[g,j]=i.useState(""),{data:m,mutate:y}=f("vnc-config",()=>u("/api/vnc/config")),[c,n]=i.useState({enabled:!1,port:5900,allowRemote:!1,hasPassword:!1,autoStart:!1});i.useEffect(()=>{m&&n(m)},[m]);const l=async()=>{N(!0);try{await u("/api/vnc/config",{method:"PUT",body:JSON.stringify({enabled:!0,port:c.port,allowRemote:c.allowRemote,autoStart:c.autoStart,password:g||void 0})}),await y(),j(""),o(t("settings.remoteDesktop.saveSuccess"),"success")}catch(d){o(t("settings.remoteDesktop.saveFailure",{message:d instanceof Error?d.message:String(d)}),"error")}finally{N(!1)}};return e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"panel space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"panel-title mb-0 flex items-center gap-2",children:[e.jsx(P,{size:18})," ",t("settings.remoteDesktop.title")]}),e.jsxs("button",{className:"btn-primary",onClick:l,disabled:h,children:[e.jsx(w,{size:16})," ",t(h?"settings.remoteDesktop.saving":"common.save")]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"vnc-port",className:"block text-sm text-slate-400 mb-1",children:t("settings.remoteDesktop.port")}),e.jsx("input",{type:"number",id:"vnc-port",min:1024,max:65535,className:"input-text w-32",value:c.port,onChange:d=>n({...c,port:parseInt(d.target.value)||5900})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"vnc-auto-start",className:"checkbox",checked:c.autoStart??!1,onChange:d=>n({...c,autoStart:d.target.checked})}),e.jsx("label",{htmlFor:"vnc-auto-start",className:"text-sm text-slate-300 cursor-pointer",children:"Start automatically"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"vnc-password",className:"block text-sm text-slate-400 mb-1",children:t("settings.remoteDesktop.password")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:a?"text":"password",id:"vnc-password",className:"input-text flex-1",placeholder:c.hasPassword?t("settings.remoteDesktop.passwordPlaceholder"):t("settings.remoteDesktop.passwordEmpty"),value:g,onChange:d=>j(d.target.value)}),e.jsx("button",{className:"btn-outline",onClick:()=>r(!a),title:t(a?"settings.remoteDesktop.hidePassword":"settings.remoteDesktop.showPassword"),children:e.jsx(me,{size:16})})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:t("settings.remoteDesktop.passwordHint")})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"vnc-allow-remote",className:"checkbox",checked:c.allowRemote,onChange:d=>n({...c,allowRemote:d.target.checked})}),e.jsx("label",{htmlFor:"vnc-allow-remote",className:"text-sm text-slate-300 cursor-pointer",children:t("settings.remoteDesktop.allowRemote")})]})}),c.allowRemote&&e.jsx("div",{className:"bg-amber-900/20 border border-amber-500/50 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(M,{size:16,className:"text-amber-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-amber-200",children:[e.jsx("p",{className:"font-semibold mb-1",children:t("settings.remoteDesktop.securityWarning")}),e.jsx("p",{children:t("settings.remoteDesktop.securityWarningText")})]})]})})]})]})})}export{Pe as default};
