import{c,u as v,b,j as e,X as p,q as y,H as N}from"./index-CFy-3w2c.js";import{r as g}from"./vendor-utils-CpUfumj7.js";import{F as f}from"./folder-BcBcgh9m.js";import{C as k}from"./check-BKh3xXWJ.js";/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=c("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=c("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=c("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=c("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=c("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),z=r=>b(`/api/fs?path=${encodeURIComponent(r)}`),F=()=>b("/api/fs/drives");function $({initialPath:r,onSelect:x,onCancel:a}){const[t,l]=g.useState(r||""),h=t||"drives",{data:m,error:i,isLoading:o}=v(h,t?()=>z(t):F),n=m?.filter(s=>s.isDirectory)||[],u=s=>{l(s)},d=()=>{if(!t)return;const s=t.split(/[/\\]/);if(s.pop(),s.length===0||s.length===1&&s[0]==="")l("");else{const j=s.join("\\")||"";t.endsWith(":\\")||t.length===2&&t[1]===":"?l(""):l(j)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-lg shadow-xl w-full max-w-2xl flex flex-col max-h-[80vh]",children:[e.jsxs("div",{className:"p-4 border-b border-slate-700 flex items-center justify-between bg-slate-800 rounded-t-lg",children:[e.jsxs("h3",{className:"font-semibold text-white flex items-center gap-2",children:[e.jsx(f,{className:"text-blue-400",size:20}),"Select Folder"]}),e.jsx("button",{onClick:a,className:"text-slate-400 hover:text-white",children:e.jsx(p,{size:20})})]}),e.jsxs("div",{className:"p-2 bg-slate-800 border-b border-slate-700 flex gap-2 items-center",children:[e.jsx("button",{onClick:d,disabled:!t,className:"p-2 hover:bg-slate-700 rounded text-slate-300 disabled:opacity-30 disabled:cursor-not-allowed",title:"Go Up",children:e.jsx(w,{size:20})}),e.jsx("div",{className:"flex-1 bg-slate-950 border border-slate-700 rounded px-3 py-1.5 text-sm text-slate-300 font-mono truncate",children:y(t)||"This PC"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-2 min-h-[300px]",children:[o&&e.jsxs("div",{className:"flex items-center justify-center h-full text-slate-400 gap-2",children:[e.jsx(C,{className:"animate-spin",size:24}),"Loading..."]}),i&&e.jsxs("div",{className:"flex items-center justify-center h-full text-red-400 gap-2",children:[e.jsx(p,{size:24}),"Failed to load directory"]}),!o&&!i&&n.length===0&&e.jsx("div",{className:"flex items-center justify-center h-full text-slate-500 italic",children:"No folders found"}),!o&&!i&&e.jsx("div",{className:"grid grid-cols-1 gap-1",children:n.map(s=>e.jsxs("button",{onClick:()=>u(s.fullPath||s.name),className:"flex items-center gap-3 p-2 hover:bg-slate-800 rounded text-left group",children:[t===""?e.jsx(N,{className:"text-slate-400 group-hover:text-blue-400",size:20}):e.jsx(f,{className:"text-yellow-500 group-hover:text-yellow-400",size:20}),e.jsx("span",{className:"text-slate-200 text-sm flex-1 truncate",children:s.name})]},s.fullPath||s.name))})]}),e.jsxs("div",{className:"p-4 border-t border-slate-700 bg-slate-800 rounded-b-lg flex justify-end gap-2",children:[e.jsx("button",{onClick:a,className:"px-4 py-2 rounded text-sm font-medium text-slate-300 hover:bg-slate-700 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:()=>x(t),disabled:!t,className:"px-4 py-2 rounded text-sm font-medium bg-blue-600 text-white hover:bg-blue-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(k,{size:16}),"Select This Folder"]})]})]})})}function V({label:r,description:x,enabled:a,onChange:t,icon:l,id:h=`toggle-${r.toLowerCase().replace(/\s+/g,"-")}`,iconColorEnabled:m="text-green-400",iconColorDisabled:i="text-slate-500"}){const[o,n]=g.useState(!1),u=async d=>{n(!0);try{await t(d)}catch(s){console.error("Toggle change failed:",s)}finally{n(!1)}};return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-900/50 rounded-lg border border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[l&&e.jsx("div",{className:a?m:i,children:l}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white",children:r}),e.jsxs("p",{className:"text-xs text-slate-400",children:[a?"Enabled":"Disabled"," ",x&&`â€¢ ${x}`]})]})]}),e.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in",children:[e.jsx("input",{type:"checkbox",name:"toggle",id:h,className:"toggle-checkbox absolute block w-5 h-5 rounded-full bg-white border-4 appearance-none cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",checked:a,onChange:d=>u(d.target.checked),disabled:o,style:{right:a?"0":"auto",left:a?"auto":"0",borderColor:a?"#3b82f6":"#cbd5e1"}}),e.jsx("label",{htmlFor:h,className:`toggle-label block overflow-hidden h-5 rounded-full cursor-pointer ${a?"bg-blue-500":"bg-slate-300"} ${o?"opacity-50":""}`})]})]})}export{w as C,M as F,C as L,U as S,V as T,T as a,$ as b};
