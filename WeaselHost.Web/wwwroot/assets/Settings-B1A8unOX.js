import{c as z,u as J,r as i,a as f,b as g,j as e,S as te,F as B,M as C,L as ae,i as A,s as m,e as ne}from"./index-Ce5nNHDR.js";import{F as P,S,a as U}from"./FolderPicker-Bh-PTyW0.js";import{E as ie}from"./eye-CrgTV1J3.js";import"./vendor-terminal-Co9mG8Of.js";import"./vendor-utils-BeCPKUKe.js";import"./folder-CipFuzDb.js";/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=z("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=z("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=z("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=z("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),ce=()=>g("/api/settings/capture"),oe=()=>g("/api/settings/security"),me=()=>g("/api/settings/mail"),de=()=>g("/api/system/startup"),xe=()=>g("/api/system/admin/status");function Ne(){const{t:s,language:h,setLanguage:N}=J(),[a,c]=i.useState("general"),{data:p,mutate:j}=f("capture-settings",ce),{data:d,mutate:y}=f("startup-status",de),{data:l,mutate:n}=f("admin-status",xe),[r,o]=i.useState({folder:"",filenamePattern:"",enableIntervalCapture:!1,intervalSeconds:60}),[H,D]=i.useState(!1),[L,R]=i.useState(!1),{data:E,mutate:_}=f("security-settings",oe),[u,k]=i.useState({requireAuthentication:!1,password:"",confirmPassword:""}),[M,$]=i.useState(!1),{data:w,mutate:K}=f("smtp-settings",me),[x,v]=i.useState({host:"smtp.gmail.com",port:587,enableSsl:!0,username:"",password:"",fromAddress:"",fromName:"Weasel Disk Monitor",testRecipient:""}),[I,O]=i.useState(!1),[q,G]=i.useState(!1),[F,V]=i.useState("");i.useEffect(()=>{p&&o({folder:p.folder||"",filenamePattern:p.filenamePattern||"",enableIntervalCapture:!1,intervalSeconds:60})},[p]),i.useEffect(()=>{E&&k(t=>({...t,requireAuthentication:E.requireAuthentication}))},[E]),i.useEffect(()=>{w&&(v(w),w.testRecipient&&V(w.testRecipient))},[w]);const Q=async()=>{R(!0);try{await g("/api/settings/capture",{method:"PUT",body:JSON.stringify({folder:r.folder,filenamePattern:r.filenamePattern,enableIntervalCapture:p?.enableIntervalCapture||!1,intervalSeconds:p?.intervalSeconds||60})}),await j(),m(s("common.success"),"success")}catch(t){m(`${s("common.error")}: ${t instanceof Error?t.message:String(t)}`,"error")}finally{R(!1)}},X=async t=>{try{await g("/api/system/startup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:t})}),await y(),m(s("common.success"),"success")}catch(b){m(`${s("common.error")}: ${b instanceof Error?b.message:String(b)}`,"error")}},Y=async()=>{setConfirmDialog({isOpen:!0,title:"Restart as Administrator",message:s("system.restartAdmin")+"?",onConfirm:async()=>{try{await g("/api/system/admin/restart",{method:"POST"}),m("Restarting as administrator...","success")}catch(t){m(`${s("common.error")}: ${t instanceof Error?t.message:String(t)}`,"error")}finally{setConfirmDialog({...confirmDialog,isOpen:!1})}},variant:"warning"})},Z=async()=>{if(u.password!==u.confirmPassword){m("Passwords do not match","error");return}$(!0);try{await g("/api/settings/security",{method:"PUT",body:JSON.stringify({requireAuthentication:u.requireAuthentication,password:u.password||null})}),k(t=>({...t,password:"",confirmPassword:""})),await _(),m(s("common.success"),"success")}catch(t){m(`${s("common.error")}: ${t instanceof Error?t.message:String(t)}`,"error")}finally{$(!1)}},ee=async()=>{O(!0);try{await g("/api/settings/mail",{method:"PUT",body:JSON.stringify({...x,testRecipient:F})}),await K(),m(s("common.success"),"success")}catch(t){m(`${s("common.error")}: ${t instanceof Error?t.message:String(t)}`,"error")}finally{O(!1)}},se=async()=>{if(!F){m("Please enter a recipient email address","error");return}G(!0);try{await g("/api/settings/mail/test",{method:"POST",body:JSON.stringify({recipient:F})}),m("Test email sent successfully","success")}catch(t){const b=t instanceof Error?t.message:String(t);m(`Failed to send test email: ${b}`,"error")}finally{G(!1)}};return e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"submenu-container",children:[e.jsxs("button",{onClick:()=>c("general"),className:`submenu-tab ${a==="general"?"active":""}`,children:[e.jsx(te,{size:16}),s("settings.general")]}),e.jsxs("button",{onClick:()=>c("security"),className:`submenu-tab ${a==="security"?"active":""}`,children:[e.jsx(T,{size:16}),s("settings.security")]}),e.jsxs("button",{onClick:()=>c("mail"),className:`submenu-tab ${a==="mail"?"active":""}`,children:[e.jsx(W,{size:16}),s("settings.mail")]}),e.jsxs("button",{onClick:()=>c("logging"),className:`submenu-tab ${a==="logging"?"active":""}`,children:[e.jsx(B,{size:16}),"Logging"]}),e.jsxs("button",{onClick:()=>c("screenshots"),className:`submenu-tab ${a==="screenshots"?"active":""}`,children:[e.jsx(P,{size:16}),"Screenshots"]}),e.jsxs("button",{onClick:()=>c("vnc"),className:`submenu-tab ${a==="vnc"?"active":""}`,children:[e.jsx(C,{size:16}),"VNC"]})]}),a==="general"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"panel",children:[e.jsxs("h3",{className:"panel-title flex items-center gap-2",children:[e.jsx(C,{size:18})," Application"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:s("settings.language")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{size:16,className:"text-slate-500"}),e.jsx("select",{className:"input-text",value:h,onChange:t=>N(t.target.value),children:e.jsx("option",{value:"en",children:"English"})})]})]})}),e.jsxs("div",{className:"space-y-3 pt-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-900/50 rounded-lg border border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(T,{size:18,className:l?.isAdministrator?"text-green-400":"text-amber-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white",children:s("settings.runAsAdmin")}),e.jsx("p",{className:"text-xs text-slate-400",children:l?.isAdministrator?s("system.admin"):s("system.standard")})]})]}),!l?.isAdministrator&&e.jsx("button",{className:"btn-outline text-xs",onClick:Y,children:s("system.restartAdmin")})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-900/50 rounded-lg border border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(C,{size:18,className:d?.enabled?"text-green-400":"text-slate-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white",children:s("settings.startWithWindows")}),e.jsx("p",{className:"text-xs text-slate-400",children:d?.enabled?"Enabled":"Disabled"})]})]}),e.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in",children:[e.jsx("input",{type:"checkbox",name:"toggle",id:"startup-toggle",className:"toggle-checkbox absolute block w-5 h-5 rounded-full bg-white border-4 appearance-none cursor-pointer",checked:d?.enabled||!1,onChange:t=>X(t.target.checked),style:{right:d?.enabled?"0":"auto",left:d?.enabled?"auto":"0",borderColor:d?.enabled?"#3b82f6":"#cbd5e1"}}),e.jsx("label",{htmlFor:"startup-toggle",className:`toggle-label block overflow-hidden h-5 rounded-full cursor-pointer ${d?.enabled?"bg-blue-500":"bg-slate-300"}`})]})]})]})]})]})}),a==="security"&&e.jsxs("div",{className:"panel",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"panel-title flex items-center gap-2 mb-0",children:[e.jsx(ae,{size:18})," ",s("settings.authentication")]}),e.jsxs("button",{className:"btn-primary",onClick:Z,disabled:M,children:[e.jsx(S,{size:16})," ",s(M?"common.loading":"common.save")]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"requireAuth",className:"checkbox",checked:u.requireAuthentication,onChange:t=>k({...u,requireAuthentication:t.target.checked})}),e.jsx("label",{htmlFor:"requireAuth",className:"text-sm text-slate-300",children:s("settings.requireAuth")})]}),e.jsxs("div",{className:"space-y-2 pt-2 border-t border-slate-800",children:[e.jsx("p",{className:"text-sm font-medium text-slate-300",children:s("settings.changePassword")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"New Password"}),e.jsx("input",{type:"password",className:"input-text",value:u.password,onChange:t=>k({...u,password:t.target.value}),placeholder:"Leave empty to keep current"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Confirm Password"}),e.jsx("input",{type:"password",className:"input-text",value:u.confirmPassword,onChange:t=>k({...u,confirmPassword:t.target.value}),placeholder:"Confirm new password"})]})]})]})]})]}),a==="mail"&&e.jsxs("div",{className:"panel",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"panel-title flex items-center gap-2 mb-0",children:[e.jsx(W,{size:18})," ",s("settings.smtpSettings")]}),e.jsxs("button",{className:"btn-primary",onClick:ee,disabled:I,children:[e.jsx(S,{size:16})," ",s(I?"common.loading":"common.save")]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-slate-300",children:s("settings.host")}),e.jsx("input",{className:"input-text",value:x.host,onChange:t=>v({...x,host:t.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-slate-300",children:s("settings.port")}),e.jsx("input",{type:"number",className:"input-text",value:x.port,onChange:t=>v({...x,port:Number(t.target.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-slate-300",children:s("settings.username")}),e.jsx("input",{className:"input-text",value:x.username||"",onChange:t=>v({...x,username:t.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-slate-300",children:s("settings.password")}),e.jsx("input",{type:"password",className:"input-text",value:x.password||"",onChange:t=>v({...x,password:t.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-slate-300",children:s("settings.senderEmail")}),e.jsx("input",{className:"input-text",value:x.fromAddress||"",onChange:t=>v({...x,fromAddress:t.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-slate-300",children:s("settings.senderName")}),e.jsx("input",{className:"input-text",value:x.fromName||"",onChange:t=>v({...x,fromName:t.target.value})})]}),e.jsxs("div",{className:"md:col-span-2 flex items-center gap-2 pt-2",children:[e.jsx("input",{type:"checkbox",id:"enableSsl",className:"checkbox",checked:x.enableSsl,onChange:t=>v({...x,enableSsl:t.target.checked})}),e.jsx("label",{htmlFor:"enableSsl",className:"text-sm text-slate-300",children:s("settings.useSsl")})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-slate-800",children:[e.jsx("h4",{className:"text-sm font-medium text-white mb-3",children:s("settings.sendTestEmail")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"input-text flex-1",placeholder:s("settings.recipient"),value:F,onChange:t=>V(t.target.value)}),e.jsxs("button",{className:"btn-outline",onClick:se,disabled:q,children:[e.jsx(re,{size:16})," ",s(q?"common.loading":"settings.sendTestEmail")]})]})]})]}),a==="logging"&&e.jsx(ge,{}),a==="screenshots"&&e.jsxs("div",{className:"panel",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"panel-title flex items-center gap-2 mb-0",children:[e.jsx(P,{size:18})," Screenshots"]}),e.jsxs("button",{className:"btn-primary",onClick:Q,disabled:L,children:[e.jsx(S,{size:16})," ",s(L?"common.loading":"common.save")]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-slate-300",children:s("settings.destinationFolder")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"flex-1 bg-slate-900 border border-slate-800 rounded px-3 py-2 text-sm text-white",value:A(r.folder),onChange:t=>{const b=t.target.value.replace(/\\\\/g,"\\");o({...r,folder:b})}}),e.jsx("button",{className:"btn-outline",type:"button",onClick:()=>D(!0),children:e.jsx(P,{size:16})})]})]}),H&&e.jsx(U,{initialPath:r.folder,onSelect:t=>{const b=t.replace(/\\\\/g,"\\");o({...r,folder:b}),D(!1)},onCancel:()=>D(!1)}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-slate-300",children:s("settings.filenamePattern")}),e.jsx("input",{className:"input-text",value:r.filenamePattern,onChange:t=>o({...r,filenamePattern:t.target.value}),placeholder:"screenshot_{timestamp}.png"}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Example: ",A(r.folder),"\\",(r.filenamePattern||"screenshot_{timestamp}.png").replace("{timestamp}",new Date().toISOString().replace(/[-:T.]/g,"").slice(0,14))]})]})]})]}),a==="vnc"&&e.jsx(pe,{})]})}function ge(){const s=()=>g("/api/settings/logging"),{data:h,mutate:N}=f("logging-settings",s),[a,c]=i.useState({folder:"",retentionDays:14,minimumLevel:"Information",maxFileSizeBytes:10*1024*1024,maxFilesPerDay:5,enableSizeRotation:!0,componentEnabled:{VNC:!0,DiskMonitor:!0,ApplicationMonitor:!0,Screenshots:!0,General:!0}}),[p,j]=i.useState(!1),[d,y]=i.useState(!1);i.useEffect(()=>{h&&c({...h,componentEnabled:h.componentEnabled||{VNC:!0,DiskMonitor:!0,ApplicationMonitor:!0,Screenshots:!0,General:!0}})},[h]);const l=async()=>{y(!0);try{await g("/api/settings/logging",{method:"PUT",body:JSON.stringify(a)}),await N(),m("Logging settings saved!","success")}catch(n){console.error("Failed to save logging settings:",n),m(`Failed to save logging settings: ${n instanceof Error?n.message:String(n)}`,"error")}finally{y(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"panel",children:[e.jsxs("h3",{className:"panel-title flex items-center gap-2",children:[e.jsx(B,{size:18})," Log File Rotation"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Log Folder"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"input-text flex-1",value:A(a.folder),onChange:n=>{const r=n.target.value.replace(/\\\\/g,"\\");c({...a,folder:r})}}),e.jsx("button",{className:"btn-outline",type:"button",onClick:()=>j(!0),children:e.jsx(P,{size:16})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Retention Days"}),e.jsx("input",{type:"number",className:"input-text",min:"0",value:a.retentionDays,onChange:n=>c({...a,retentionDays:parseInt(n.target.value)||0})}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"How many days to keep log files (0 = keep forever)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Minimum Log Level"}),e.jsxs("select",{className:"input-text",value:a.minimumLevel,onChange:n=>c({...a,minimumLevel:n.target.value}),children:[e.jsx("option",{value:"Trace",children:"Trace"}),e.jsx("option",{value:"Debug",children:"Debug"}),e.jsx("option",{value:"Information",children:"Information"}),e.jsx("option",{value:"Warning",children:"Warning"}),e.jsx("option",{value:"Error",children:"Error"}),e.jsx("option",{value:"Critical",children:"Critical"}),e.jsx("option",{value:"None",children:"None"})]})]})]}),e.jsxs("div",{className:"pt-2 border-t border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("input",{type:"checkbox",id:"enableSizeRotation",className:"checkbox",checked:a.enableSizeRotation,onChange:n=>c({...a,enableSizeRotation:n.target.checked})}),e.jsx("label",{htmlFor:"enableSizeRotation",className:"text-sm text-slate-300",children:"Enable size-based rotation"})]}),a.enableSizeRotation&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pl-6 border-l-2 border-slate-800",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Max File Size (MB)"}),e.jsx("input",{type:"number",className:"input-text",min:"1",step:"1",value:Math.round(a.maxFileSizeBytes/(1024*1024)),onChange:n=>{const r=parseInt(n.target.value)||1;c({...a,maxFileSizeBytes:r*1024*1024})}}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Current: ",ne(a.maxFileSizeBytes)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Max Files Per Day"}),e.jsx("input",{type:"number",className:"input-text",min:"0",value:a.maxFilesPerDay,onChange:n=>c({...a,maxFilesPerDay:parseInt(n.target.value)||0})}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Maximum rotated files to keep per day (0 = unlimited)"})]})]})]}),e.jsx("div",{className:"pt-4 border-t border-slate-800",children:e.jsxs("button",{className:"btn-primary",onClick:l,disabled:d,children:[e.jsx(S,{size:16})," ",d?"Saving…":"Save Logging Settings"]})})]})]}),e.jsxs("div",{className:"panel",children:[e.jsxs("h3",{className:"panel-title flex items-center gap-2",children:[e.jsx(C,{size:18})," Component Logging"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-slate-400",children:"Enable or disable logging for specific components. Each component writes to its own log file in a subfolder."}),e.jsx("div",{className:"space-y-3",children:["VNC","DiskMonitor","ApplicationMonitor","Screenshots","General"].map(n=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-900/50 rounded border border-slate-800",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-300 cursor-pointer",htmlFor:`component-${n}`,children:n}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[n==="VNC"&&"VNC server and connection logs",n==="DiskMonitor"&&"Disk and folder monitoring logs",n==="ApplicationMonitor"&&"Application monitoring and restart logs",n==="Screenshots"&&"Screenshot capture and interval logs",n==="General"&&"General application logs"]})]}),e.jsx("input",{type:"checkbox",id:`component-${n}`,className:"checkbox",checked:a.componentEnabled?.[n]??!0,onChange:r=>{c({...a,componentEnabled:{...a.componentEnabled,[n]:r.target.checked}})}})]},n))}),e.jsx("div",{className:"pt-4 border-t border-slate-800",children:e.jsxs("button",{className:"btn-primary",onClick:l,disabled:d,children:[e.jsx(S,{size:16})," ",d?"Saving…":"Save Component Settings"]})})]})]}),p&&e.jsx(U,{initialPath:a.folder,onSelect:n=>{const r=n.replace(/\\\\/g,"\\");c({...a,folder:r}),j(!1)},onCancel:()=>j(!1)})]})}function pe(){const{t:s}=J(),[h,N]=i.useState(!1),[a,c]=i.useState(!1),[p,j]=i.useState(""),{data:d,mutate:y}=f("vnc-config",()=>g("/api/vnc/config")),[l,n]=i.useState({enabled:!1,port:5900,allowRemote:!1,hasPassword:!1,autoStart:!1});i.useEffect(()=>{d&&n(d)},[d]);const r=async()=>{N(!0);try{await g("/api/vnc/config",{method:"PUT",body:JSON.stringify({enabled:l.enabled,port:l.port,allowRemote:l.allowRemote,autoStart:l.autoStart,password:p||void 0})}),await y(),j(""),m(s("settings.remoteDesktop.saveSuccess"),"success")}catch(o){m(s("settings.remoteDesktop.saveFailure",{message:o instanceof Error?o.message:String(o)}),"error")}finally{N(!1)}};return e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"panel space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"panel-title mb-0 flex items-center gap-2",children:[e.jsx(C,{size:18})," ",s("settings.remoteDesktop.title")]}),e.jsxs("button",{className:"btn-primary",onClick:r,disabled:h,children:[e.jsx(S,{size:16})," ",s(h?"settings.remoteDesktop.saving":"common.save")]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"vnc-enable",className:"checkbox",checked:l.enabled,onChange:o=>n({...l,enabled:o.target.checked})}),e.jsx("label",{htmlFor:"vnc-enable",className:"text-sm text-slate-300 cursor-pointer",children:s("settings.remoteDesktop.enable")})]})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"vnc-port",className:"block text-sm text-slate-400 mb-1",children:s("settings.remoteDesktop.port")}),e.jsx("input",{type:"number",id:"vnc-port",min:1024,max:65535,className:"input-text w-32",value:l.port,onChange:o=>n({...l,port:parseInt(o.target.value)||5900})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"vnc-auto-start",className:"checkbox",checked:l.autoStart??!1,onChange:o=>n({...l,autoStart:o.target.checked})}),e.jsx("label",{htmlFor:"vnc-auto-start",className:"text-sm text-slate-300 cursor-pointer",children:"Auto-start VNC server when Weasel starts"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"vnc-password",className:"block text-sm text-slate-400 mb-1",children:s("settings.remoteDesktop.password")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:a?"text":"password",id:"vnc-password",className:"input-text flex-1",placeholder:l.hasPassword?s("settings.remoteDesktop.passwordPlaceholder"):s("settings.remoteDesktop.passwordEmpty"),value:p,onChange:o=>j(o.target.value)}),e.jsx("button",{className:"btn-outline",onClick:()=>c(!a),title:s(a?"settings.remoteDesktop.hidePassword":"settings.remoteDesktop.showPassword"),children:e.jsx(ie,{size:16})})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:s("settings.remoteDesktop.passwordHint")})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"vnc-allow-remote",className:"checkbox",checked:l.allowRemote,onChange:o=>n({...l,allowRemote:o.target.checked})}),e.jsx("label",{htmlFor:"vnc-allow-remote",className:"text-sm text-slate-300 cursor-pointer",children:s("settings.remoteDesktop.allowRemote")})]})}),l.allowRemote&&e.jsx("div",{className:"bg-amber-900/20 border border-amber-500/50 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(T,{size:16,className:"text-amber-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-amber-200",children:[e.jsx("p",{className:"font-semibold mb-1",children:s("settings.remoteDesktop.securityWarning")}),e.jsx("p",{children:s("settings.remoteDesktop.securityWarningText")})]})]})})]})]})})}export{Ne as default};
