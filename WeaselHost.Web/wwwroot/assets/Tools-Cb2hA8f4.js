const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TerminalViewer-DZQjLAiI.js","assets/index-B2pomQzr.js","assets/vendor-terminal-Co9mG8Of.js","assets/vendor-terminal-C0BCwPpi.css","assets/vendor-utils-BeCPKUKe.js","assets/index-VN4hMGb-.css"])))=>i.map(i=>d[i]);
import{c as Z,r as o,u as U,b as A,j as e,X as Y,o as J,a as He,M as X,H as ne,q as te,R as ie,f as re,h as we,P as ke,s as y,C as Je,t as Te,l as We,e as q,v as Se,w as Ce,_ as Xe}from"./index-B2pomQzr.js";import{C as De,L as Ze,a as oe,T as W,F as xe,b as Qe,S as Ye}from"./ToggleBar-CxV4FlJG.js";import{F as Ge}from"./folder-BH67oCG7.js";import{L as G,C as Ke}from"./LogPanel-CRVJJHi1.js";import{C as me}from"./camera-BbL3_yZm.js";import{I as Pe}from"./image-BbBuAUfb.js";import{D as ae}from"./download-gbN7CM3n.js";import{T as H}from"./trash-2-YbxoeIgQ.js";import{E as ue}from"./eye-Becozmbq.js";import"./vendor-terminal-Co9mG8Of.js";import"./vendor-utils-BeCPKUKe.js";import"./check-BUHp3h2-.js";/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=Z("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=Z("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=Z("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=Z("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=Z("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=Z("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]),as=t=>A(`/api/fs?path=${encodeURIComponent(t)}`),ls=()=>A("/api/fs/drives");function ns({initialPath:t,onSelect:w,onCancel:k,fileExtensions:I}){const[d,z]=o.useState(()=>{if(t){const h=t.lastIndexOf("\\");if(h>0)return t.substring(0,h)}return""}),O=d||"drives",{data:T,error:v,isLoading:n}=U(O,d?()=>as(d):ls),x=T?.filter(h=>{if(h.isDirectory||!I||I.length===0)return!0;const F=h.name.substring(h.name.lastIndexOf(".")).toLowerCase();return I.some(M=>M.toLowerCase()===F)})||[],g=x.filter(h=>h.isDirectory),N=x.filter(h=>!h.isDirectory),C=h=>{z(h)},j=h=>{w(h.fullPath)},P=()=>{if(!d)return;const h=d.split(/[/\\]/);if(h.pop(),h.length===0||h.length===1&&h[0]==="")z("");else{const F=h.join("\\")||"";d.endsWith(":\\")||d.length===2&&d[1]===":"?z(""):z(F)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-lg shadow-xl w-full max-w-2xl flex flex-col max-h-[80vh]",children:[e.jsxs("div",{className:"p-4 border-b border-slate-700 flex items-center justify-between bg-slate-800 rounded-t-lg",children:[e.jsxs("h3",{className:"font-semibold text-white flex items-center gap-2",children:[e.jsx(ze,{className:"text-blue-400",size:20}),"Select File"]}),e.jsx("button",{onClick:k,className:"text-slate-400 hover:text-white",children:e.jsx(Y,{size:20})})]}),e.jsxs("div",{className:"p-2 bg-slate-800 border-b border-slate-700 flex gap-2 items-center",children:[e.jsx("button",{onClick:P,disabled:!d,className:"p-2 hover:bg-slate-700 rounded text-slate-300 disabled:opacity-30 disabled:cursor-not-allowed",title:"Go Up",children:e.jsx(De,{size:20})}),e.jsx("div",{className:"flex-1 bg-slate-950 border border-slate-700 rounded px-3 py-1.5 text-sm text-slate-300 font-mono truncate",children:J(d)||"This PC"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-2 min-h-[300px]",children:[n&&e.jsxs("div",{className:"flex items-center justify-center h-full text-slate-400 gap-2",children:[e.jsx(Ze,{className:"animate-spin",size:24}),"Loading..."]}),v&&e.jsxs("div",{className:"flex items-center justify-center h-full text-red-400 gap-2",children:[e.jsx(Y,{size:24}),"Failed to load directory"]}),!n&&!v&&x.length===0&&e.jsx("div",{className:"flex items-center justify-center h-full text-slate-500 italic",children:"No items found"}),!n&&!v&&e.jsxs("div",{className:"space-y-1",children:[g.map(h=>e.jsxs("button",{onClick:()=>C(h.fullPath||h.name),className:"w-full flex items-center gap-3 p-2 hover:bg-slate-800 rounded text-left group",children:[e.jsx(Ge,{className:"text-yellow-500 group-hover:text-yellow-400",size:20}),e.jsx("span",{className:"text-slate-200 text-sm flex-1 truncate",children:h.name})]},h.fullPath||h.name)),N.map(h=>e.jsxs("button",{onClick:()=>j(h),className:"w-full flex items-center gap-3 p-2 hover:bg-slate-800 rounded text-left group",children:[e.jsx(ze,{className:"text-blue-400 group-hover:text-blue-300",size:20}),e.jsx("span",{className:"text-slate-200 text-sm flex-1 truncate",children:h.name})]},h.fullPath||h.name))]})]}),e.jsx("div",{className:"p-4 border-t border-slate-700 bg-slate-800 rounded-b-lg flex justify-end gap-2",children:e.jsx("button",{onClick:k,className:"px-4 py-2 rounded text-sm font-medium text-slate-300 hover:bg-slate-700 transition-colors",children:"Cancel"})})]})})}const is={colors:{background:{primary:"#030712",secondary:"#0f172a",tertiary:"#1e293b",panel:"rgba(15, 23, 42, 0.8)",modal:"#0f172a",submenu:"rgba(15, 23, 42, 0.5)"},text:{primary:"#ffffff",secondary:"#e2e8f0",tertiary:"#cbd5e1",muted:"#94a3b8"},border:{default:"rgba(148, 163, 184, 0.3)",hover:"rgba(148, 163, 184, 0.4)",active:"#38bdf8",muted:"rgba(148, 163, 184, 0.12)"},accent:{primary:"#38bdf8",hover:"#0ea5e9",active:"#2563eb"},state:{success:"#10b981",warning:"#f59e0b",error:"#ef4444",info:"#3b82f6"}},spacing:{xs:"0.25rem",sm:"0.5rem",md:"1rem",lg:"1.5rem",xl:"2rem"},borderRadius:{sm:"0.4rem",md:"0.5rem",lg:"0.75rem",full:"999px"},shadows:{sm:"0 15px 30px rgba(2, 6, 23, 0.35)",md:"0 20px 45px rgba(2, 6, 23, 0.45)",lg:"0 30px 60px rgba(2, 6, 23, 0.7)",xl:"0 40px 80px rgba(2, 6, 23, 0.9)"}};function rs(){return is}const os=o.lazy(()=>Xe(()=>import("./TerminalViewer-DZQjLAiI.js"),__vite__mapDeps([0,1,2,3,4,5]))),fe=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const w=Math.random()*16|0;return(t==="x"?w:w&3|8).toString(16)}),cs=()=>A("/api/settings/capture"),he=t=>{const w=Te(),k=new URL("/api/fs/raw",window.location.origin);k.searchParams.set("path",t),w&&k.searchParams.set("token",w);const I=k.toString();return console.log("[Screenshots] Building raw URL for path:",t,"-> URL:",I),I};function Ts(){const{t}=He(),w=rs(),[k,I]=o.useState("screenshots"),[d,z]=o.useState(null),[O,T]=o.useState(!1),[v,n]=o.useState(new Set);o.useEffect(()=>{const a=()=>{const r=window.location.hash.slice(1);if(!r)return;const p=r.split("/").filter(Boolean);if(p[0]==="tools"&&p[1]){const D=p[1];["application-monitor","storage-monitor","terminal","vnc","screenshots"].includes(D)&&I(D)}};return a(),window.addEventListener("hashchange",a),()=>window.removeEventListener("hashchange",a)},[]),o.useEffect(()=>{const r=window.location.hash.slice(1).split("/").filter(Boolean);r[0]==="tools"&&r[1]!==k&&(window.location.hash=`/tools/${k}`)},[k]);const[x,g]=o.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{},variant:"info"}),{data:N,mutate:C}=U("capture-settings",cs),j=N?.folder??"",P=N?.timedFolder??"",[h,F]=o.useState({enableIntervalCapture:!1,intervalSeconds:60});o.useEffect(()=>{N&&F({enableIntervalCapture:N.enableIntervalCapture??!1,intervalSeconds:N.intervalSeconds??60})},[N]);const{data:M,isLoading:$,mutate:i}=U(j?["screenshots",j]:null,([,a])=>{const r=new URL("/api/fs",window.location.origin);return r.searchParams.set("path",a),A(r.toString())},{revalidateOnFocus:!1}),c=o.useMemo(()=>!M||!Array.isArray(M)?[]:M.filter(a=>a.name.toLowerCase().endsWith(".png")),[M]),{data:f,isLoading:R,mutate:V}=U(P?["timed-screenshots",P]:null,([,a])=>{const r=new URL("/api/fs",window.location.origin);return r.searchParams.set("path",a),A(r.toString())},{revalidateOnFocus:!1}),s=o.useMemo(()=>!f||!Array.isArray(f)?[]:f.filter(a=>a.name.toLowerCase().endsWith(".png")),[f]),[l,m]=o.useState(new Set),[u,b]=o.useState(()=>{const a=localStorage.getItem("weasel.screenshots.capturedPageSize");return a?parseInt(a):25}),[S,E]=o.useState(1),[L,ce]=o.useState(()=>{const a=localStorage.getItem("weasel.screenshots.timedPageSize");return a?parseInt(a):25}),[de,be]=o.useState(1),ge=o.useMemo(()=>{if(u===0)return c;const a=(S-1)*u,r=a+u;return c.slice(a,r)},[c,u,S]),je=o.useMemo(()=>{if(L===0)return s;const a=(de-1)*L,r=a+L;return s.slice(a,r)},[s,L,de]),Ae=a=>{b(a),E(1),localStorage.setItem("weasel.screenshots.capturedPageSize",a.toString())},Ie=a=>{ce(a),be(1),localStorage.setItem("weasel.screenshots.timedPageSize",a.toString())};o.useEffect(()=>()=>{d&&URL.revokeObjectURL(d.url)},[d]);const K=a=>{z({path:a.fullPath,url:he(a.fullPath)})},[ee,ve]=o.useState(null),Re=async a=>{ve(a),g({isOpen:!0,title:"Delete Screenshot",message:t("tools.screenshots.deleteConfirm",{name:a.name}),onConfirm:async()=>{if(ee)try{const r=new URL("/api/fs",window.location.origin);r.searchParams.set("path",ee.fullPath),await A(r.toString(),{method:"DELETE"}),d?.path===ee.fullPath&&(URL.revokeObjectURL(d.url),z(null)),n(p=>{const D=new Set(p);return D.delete(ee.fullPath),D}),await i?.(),y("Screenshot deleted successfully","success"),ve(null),g(p=>({...p,isOpen:!1}))}catch(r){y(`Failed to delete screenshot: ${r instanceof Error?r.message:"Unknown error"}`,"error")}},variant:"danger"})},Oe=a=>{n(r=>{const p=new Set(r);return p.has(a)?p.delete(a):p.add(a),p})},Fe=()=>{n(new Set(c.map(a=>a.fullPath)))},Ne=()=>{n(new Set)},Le=async()=>{if(v.size!==0)try{const a=Array.from(v),r=localStorage.getItem("weasel.csrf")||"local",p=localStorage.getItem("weasel.auth.token"),D={"Content-Type":"application/json","X-Weasel-Csrf":r};p&&(D["X-Weasel-Token"]=p);const _=await fetch("/api/fs/download/bulk",{method:"POST",headers:D,body:JSON.stringify({paths:a})});if(!_.ok)throw new Error(`HTTP ${_.status}: ${_.statusText}`);const se=await _.blob(),B=window.URL.createObjectURL(se),Q=document.createElement("a");Q.href=B,Q.download=`screenshots_${new Date().toISOString().slice(0,10)}.zip`,document.body.appendChild(Q),Q.click(),document.body.removeChild(Q),window.URL.revokeObjectURL(B),n(new Set)}catch(a){y(`Failed to download screenshots: ${a instanceof Error?a.message:String(a)}`,"error")}},Me=async()=>{if(v.size===0)return;const a=v.size;g({isOpen:!0,title:"Delete Screenshots",message:`Delete ${a} screenshot${a>1?"s":""}?`,onConfirm:async()=>{try{const r=Array.from(v);for(const p of r){const D=new URL("/api/fs",window.location.origin);D.searchParams.set("path",p),await A(D.toString(),{method:"DELETE"}),d?.path===p&&(URL.revokeObjectURL(d.url),z(null))}n(new Set),await i?.(),y(`Deleted ${a} screenshot${a>1?"s":""} successfully`,"success"),g(p=>({...p,isOpen:!1}))}catch(r){y(`Failed to delete screenshots: ${r instanceof Error?r.message:String(r)}`,"error"),g(p=>({...p,isOpen:!1}))}},variant:"danger"})},Ee=async()=>{await A("/api/system/screenshot",{method:"POST"}),await i?.()},Ue=async()=>{T(!0);try{await A("/api/settings/capture",{method:"PUT",body:JSON.stringify({folder:N?.folder||"",filenamePattern:N?.filenamePattern||"",timedFolder:N?.timedFolder||"",enableIntervalCapture:h.enableIntervalCapture,intervalSeconds:h.intervalSeconds})}),await C(),y(t("tools.screenshots.saveSuccess"),"success")}catch(a){const r=a instanceof Error?a.message:String(a);y(t("tools.screenshots.saveFailure",{message:r}),"error")}finally{T(!1)}},$e=a=>{m(r=>{const p=new Set(r);return p.has(a)?p.delete(a):p.add(a),p})},Ve=()=>{m(new Set(s.map(a=>a.fullPath)))},ye=()=>{m(new Set)},Be=async()=>{if(l.size!==0)try{const a=Te(),r=Array.from(l),p={"Content-Type":"application/json"};a&&(p["X-Weasel-Token"]=a);const D=await fetch("/api/fs/download/bulk",{method:"POST",headers:p,body:JSON.stringify({paths:r})});if(!D.ok)throw new Error(`HTTP ${D.status}: ${D.statusText}`);const _=await D.blob(),se=window.URL.createObjectURL(_),B=document.createElement("a");B.href=se,B.download=`timed_screenshots_${new Date().toISOString().slice(0,10)}.zip`,document.body.appendChild(B),B.click(),document.body.removeChild(B),window.URL.revokeObjectURL(se),m(new Set)}catch(a){y(`Failed to download screenshots: ${a instanceof Error?a.message:String(a)}`,"error")}},qe=async()=>{if(l.size===0)return;const a=l.size;g({isOpen:!0,title:"Delete Timed Screenshots",message:`Delete ${a} timed screenshot${a>1?"s":""}?`,onConfirm:async()=>{try{const r=Array.from(l);for(const p of r){const D=new URL("/api/fs",window.location.origin);D.searchParams.set("path",p),await A(D.toString(),{method:"DELETE"}),d?.path===p&&(URL.revokeObjectURL(d.url),z(null))}m(new Set),await V?.(),y(`Deleted ${a} timed screenshot${a>1?"s":""} successfully`,"success"),g(p=>({...p,isOpen:!1}))}catch(r){y(`Failed to delete screenshots: ${r instanceof Error?r.message:String(r)}`,"error"),g(p=>({...p,isOpen:!1}))}},variant:"danger"})},_e=[{key:"application-monitor",label:t("tools.tabs.appMonitor"),icon:e.jsx(X,{size:16})},{key:"storage-monitor",label:"Storage Monitor",icon:e.jsx(ne,{size:16})},{key:"terminal",label:"Terminal",icon:e.jsx(pe,{size:16})},{key:"vnc",label:"VNC",icon:e.jsx(X,{size:16})},{key:"screenshots",label:t("tools.tabs.screenshots"),icon:e.jsx(me,{size:16})}];return e.jsxs("section",{className:"space-y-4",children:[e.jsx("div",{className:"submenu-container",children:_e.map(({key:a,label:r,icon:p})=>e.jsxs("button",{onClick:()=>I(a),className:`submenu-tab ${k===a?"active":""}`,children:[p,r]},a))}),k==="screenshots"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"panel space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"panel-title mb-0 flex items-center gap-2",children:[e.jsx(es,{size:18})," ",t("tools.screenshots.timedTitle")]}),e.jsxs("button",{className:"btn-primary",onClick:Ue,disabled:O,children:[e.jsx(oe,{size:16})," ",t(O?"tools.screenshots.saving":"tools.screenshots.save")]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(W,{label:t("tools.screenshots.enableAuto"),description:"Automatically capture screenshots at interval",enabled:h.enableIntervalCapture,onChange:a=>F({...h,enableIntervalCapture:a}),icon:e.jsx(me,{size:18})}),h.enableIntervalCapture&&e.jsxs("div",{className:"ml-6 pl-4 border-l-2 border-slate-800 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-slate-400",children:t("tools.screenshots.intervalLabel")}),e.jsx("input",{type:"number",min:1,className:"input-text w-24",value:h.intervalSeconds,onChange:a=>F({...h,intervalSeconds:Math.max(1,Number(a.target.value))})})]}),e.jsx("p",{className:"text-xs text-slate-500",children:t("tools.screenshots.intervalHint")})]})]})]}),e.jsxs("div",{className:"panel space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"panel-title mb-1",children:t("tools.screenshots.sectionTitle")}),e.jsxs("p",{className:"text-sm text-slate-400",children:[t("tools.screenshots.folderLabel"),": ",J(j)||t("tools.screenshots.folderMissing")]})]}),e.jsxs("div",{className:"flex gap-2",children:[c.length>0&&e.jsx("button",{className:"btn-outline text-xs",onClick:v.size===c.length?Ne:Fe,children:v.size===c.length?e.jsxs(e.Fragment,{children:[e.jsx(te,{size:14})," Deselect All"]}):e.jsxs(e.Fragment,{children:[e.jsx(le,{size:14})," Select All"]})}),e.jsxs("button",{className:"btn-primary",onClick:Ee,children:[e.jsx(me,{size:16})," ",t("tools.screenshots.takeScreenshot")]}),e.jsxs("button",{className:"btn-outline",onClick:()=>i(),children:[e.jsx(ie,{size:16})," ",t("common.refresh")]})]})]}),$&&e.jsx("p",{className:"text-sm text-slate-400",children:t("tools.screenshots.loading")}),!$&&j&&c.length===0&&e.jsxs("div",{className:"text-sm text-slate-400 flex items-center gap-2",children:[e.jsx(Pe,{size:16}),t("tools.screenshots.empty")]}),v.size>0&&e.jsx("div",{className:"panel bg-sky-900/20 border-sky-500/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-slate-300",children:[v.size," screenshot",v.size>1?"s":""," selected"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"btn-outline text-xs",onClick:Ne,children:"Clear"}),e.jsxs("button",{className:"btn-primary text-xs",onClick:Le,children:[e.jsx(ae,{size:14})," Download as ZIP"]}),e.jsxs("button",{className:"btn-outline text-xs text-red-400 hover:text-red-300",onClick:Me,children:[e.jsx(H,{size:14})," Delete"]})]})]})}),e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:Array.isArray(ge)&&ge.map(a=>e.jsxs("div",{className:`screenshot-card ${v.has(a.fullPath)?"ring-2 ring-sky-500":""}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:he(a.fullPath),alt:a.name,className:"screenshot-thumb",onClick:()=>K(a),onError:r=>{console.error("[Screenshots] Failed to load image:",a.fullPath,r),r.currentTarget.style.backgroundColor="#1e293b",r.currentTarget.style.border="2px solid #ef4444"},onLoad:()=>{console.log("[Screenshots] Image loaded successfully:",a.name)}}),e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx("button",{className:"icon-btn bg-slate-900/80 hover:bg-slate-800/80",onClick:r=>{r.stopPropagation(),Oe(a.fullPath)},title:v.has(a.fullPath)?"Deselect":"Select",children:v.has(a.fullPath)?e.jsx(le,{size:16,className:"text-sky-400"}):e.jsx(te,{size:16})})})]}),e.jsxs("div",{className:"screenshot-meta",children:[e.jsxs("div",{children:[e.jsx("p",{className:"screenshot-name",children:a.name}),e.jsx("p",{className:"text-xs text-slate-400",children:re(a.modifiedAt)})]}),e.jsxs("div",{className:"screenshot-actions",children:[e.jsx("button",{className:"icon-btn",onClick:()=>K(a),title:t("common.view"),children:e.jsx(ue,{size:16})}),e.jsx("button",{className:"icon-btn",onClick:()=>we(a.fullPath),title:t("common.download"),children:e.jsx(ae,{size:16})}),e.jsx("button",{className:"icon-btn",onClick:()=>Re(a),title:"Delete",children:e.jsx(H,{size:16})})]})]})]},a.fullPath))}),e.jsx(ke,{currentPage:S,totalItems:c.length,pageSize:u,onPageChange:E,onPageSizeChange:Ae})]}),P&&e.jsxs("div",{className:"panel space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"panel-title mb-1",children:"Timed Screenshots"}),e.jsxs("p",{className:"text-sm text-slate-400",children:["Folder: ",J(P)]})]}),e.jsxs("div",{className:"flex gap-2",children:[s.length>0&&e.jsx("button",{className:"btn-outline text-xs",onClick:l.size===s.length?ye:Ve,children:l.size===s.length?e.jsxs(e.Fragment,{children:[e.jsx(te,{size:14})," Deselect All"]}):e.jsxs(e.Fragment,{children:[e.jsx(le,{size:14})," Select All"]})}),e.jsxs("button",{className:"btn-outline",onClick:()=>V(),children:[e.jsx(ie,{size:16})," ",t("common.refresh")]})]})]}),R&&e.jsx("p",{className:"text-sm text-slate-400",children:"Loading timed screenshots..."}),!R&&s.length===0&&e.jsxs("div",{className:"text-sm text-slate-400 flex items-center gap-2",children:[e.jsx(Pe,{size:16}),"No timed screenshots found"]}),l.size>0&&e.jsx("div",{className:"panel bg-sky-900/20 border-sky-500/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-slate-300",children:[l.size," timed screenshot",l.size>1?"s":""," selected"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"btn-outline text-xs",onClick:ye,children:"Clear"}),e.jsxs("button",{className:"btn-primary text-xs",onClick:Be,children:[e.jsx(ae,{size:14})," Download as ZIP"]}),e.jsxs("button",{className:"btn-outline text-xs text-red-400 hover:text-red-300",onClick:qe,children:[e.jsx(H,{size:14})," Delete"]})]})]})}),e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:Array.isArray(je)&&je.map(a=>e.jsxs("div",{className:`screenshot-card ${l.has(a.fullPath)?"ring-2 ring-sky-500":""}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:he(a.fullPath),alt:a.name,className:"screenshot-thumb",onClick:()=>K(a)}),e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx("button",{className:"icon-btn bg-slate-900/80 hover:bg-slate-800/80",onClick:r=>{r.stopPropagation(),$e(a.fullPath)},title:l.has(a.fullPath)?"Deselect":"Select",children:l.has(a.fullPath)?e.jsx(le,{size:16,className:"text-sky-400"}):e.jsx(te,{size:16})})})]}),e.jsxs("div",{className:"screenshot-meta",children:[e.jsxs("div",{children:[e.jsx("p",{className:"screenshot-name",children:a.name}),e.jsx("p",{className:"text-xs text-slate-400",children:re(a.modifiedAt)})]}),e.jsxs("div",{className:"screenshot-actions",children:[e.jsx("button",{className:"icon-btn",onClick:()=>K(a),title:t("common.view"),children:e.jsx(ue,{size:16})}),e.jsx("button",{className:"icon-btn",onClick:()=>we(a.fullPath),title:t("common.download"),children:e.jsx(ae,{size:16})}),e.jsx("button",{className:"icon-btn",onClick:()=>{g({isOpen:!0,title:"Delete Timed Screenshot",message:`Delete ${a.name}?`,onConfirm:async()=>{try{const r=new URL("/api/fs",window.location.origin);r.searchParams.set("path",a.fullPath),await A(r.toString(),{method:"DELETE"}),d?.path===a.fullPath&&(URL.revokeObjectURL(d.url),z(null)),m(p=>{const D=new Set(p);return D.delete(a.fullPath),D}),await V?.(),y("Timed screenshot deleted successfully","success"),g(p=>({...p,isOpen:!1}))}catch(r){y(`Failed to delete screenshot: ${r instanceof Error?r.message:"Unknown error"}`,"error"),g(p=>({...p,isOpen:!1}))}},variant:"danger"})},title:"Delete",children:e.jsx(H,{size:16})})]})]})]},a.fullPath))}),e.jsx(ke,{currentPage:de,totalItems:s.length,pageSize:L,onPageChange:be,onPageSizeChange:Ie})]}),d&&e.jsx("div",{className:"modal-backdrop",onClick:()=>z(null),children:e.jsxs("div",{className:"modal",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400 uppercase tracking-[0.2em]",children:t("tools.screenshots.previewTitle")}),e.jsx("p",{className:"font-semibold text-white break-all",children:d.path})]}),e.jsx("button",{className:"btn-outline",onClick:()=>z(null),children:t("common.cancel")})]}),e.jsx("div",{className:"modal-body",children:e.jsx("img",{src:d.url,alt:"Screenshot preview",className:"w-full rounded-md border border-slate-800"})})]})}),e.jsx(xs,{t})]}),k==="storage-monitor"&&e.jsx(ds,{t,theme:w}),k==="application-monitor"&&e.jsx(ms,{t}),k==="terminal"&&e.jsx(hs,{t}),k==="vnc"&&e.jsx(fs,{t}),e.jsx(Je,{isOpen:x.isOpen,title:x.title,message:x.message,onConfirm:x.onConfirm,onCancel:()=>g(a=>({...a,isOpen:!1})),variant:x.variant})]})}function ds({t,theme:w}){const[k,I]=o.useState(!1),[d,z]=o.useState(null),[O,T]=o.useState(null),{data:v,mutate:n}=U("disk-monitoring-config",()=>A("/api/disk-monitoring/config")),{data:x,mutate:g}=U("disk-monitoring-status",()=>A("/api/disk-monitoring/status"),{refreshInterval:3e4}),{data:N}=U("available-drives",()=>A("/api/disk-monitoring/drives")),[C,j]=o.useState({enabled:!1,monitoredDrives:[],folderMonitors:[],notificationRecipients:[]});o.useEffect(()=>{v&&j(v)},[v]);const P=o.useCallback(s=>{if(Array.isArray(C.monitoredDrives))return C.monitoredDrives.find(l=>l.driveName===s)},[C.monitoredDrives]),h=o.useCallback((s,l)=>{j(m=>{const u=Array.isArray(m.monitoredDrives)?m.monitoredDrives:[],b=u.find(L=>L.driveName===s),S=b?{...b,...l}:{driveName:s,enabled:!0,checkIntervalMinutes:15,thresholdPercent:null,thresholdBytes:null,...l},E=u.filter(L=>L.driveName!==s);return{...m,monitoredDrives:[...E,S]}})},[]),F=o.useCallback(async()=>{I(!0);try{await A("/api/disk-monitoring/config",{method:"PUT",body:JSON.stringify(C)}),await n(),await g(),y(t("tools.disk.saveSuccess"),"success")}catch(s){console.error("Failed to save disk monitoring config:",s);const l=s instanceof Error?s.message:String(s);y(t("tools.disk.saveFailure",{message:l}),"error")}finally{I(!1)}},[C,n,g,t]),M=o.useCallback(()=>{const s=window.prompt(t("tools.disk.recipientPrompt"));if(s){const l=Array.isArray(C.notificationRecipients)?C.notificationRecipients:[];l.includes(s)||j(m=>({...m,notificationRecipients:[...l,s]}))}},[C.notificationRecipients,t]),$=o.useCallback(s=>{j(l=>{const m=Array.isArray(l.notificationRecipients)?l.notificationRecipients:[];return{...l,notificationRecipients:m.filter(u=>u!==s)}})},[]),i=N&&Array.isArray(N)?N.find(s=>s.name===d):void 0,c=d?P(d):void 0,f=x?.driveStatuses&&Array.isArray(x.driveStatuses)?x.driveStatuses.find(s=>s.driveName===d):void 0,R=x?.isRunning?t("tools.disk.statusActive"):t("tools.disk.statusInactive"),V=x?.lastCheck?re(x.lastCheck):t("tools.disk.statusNever");return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"panel space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"panel-title mb-1",children:t("tools.disk.title")}),e.jsxs("p",{className:"text-sm text-slate-400",children:[R," • ",t("tools.disk.lastCheck",{value:V})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{className:"btn-outline",onClick:()=>g(),children:[e.jsx(ie,{size:16})," ",t("common.refresh")]}),e.jsxs("button",{className:"btn-primary",onClick:F,disabled:k,children:[e.jsx(oe,{size:16})," ",t(k?"tools.disk.saving":"tools.disk.save")]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(W,{label:t("tools.disk.enable"),description:"Monitor disk space and send alerts",enabled:C.enabled,onChange:s=>j(l=>({...l,enabled:s})),icon:e.jsx(ne,{size:18})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm text-slate-400",children:t("tools.disk.recipients")}),e.jsx("button",{className:"btn-outline text-xs",onClick:M,children:t("tools.disk.addRecipient")})]}),e.jsxs("div",{className:"space-y-1",children:[Array.isArray(C.notificationRecipients)&&C.notificationRecipients.map(s=>e.jsxs("div",{className:"flex items-center justify-between bg-slate-900/50 rounded px-2 py-1",children:[e.jsx("span",{className:"text-sm text-slate-300",children:s}),e.jsx("button",{className:"icon-btn",onClick:()=>$(s),children:"×"})]},s)),C.notificationRecipients.length===0&&e.jsx("p",{className:"text-xs text-slate-500",children:t("tools.disk.noRecipients")})]})]})]})]}),e.jsxs("div",{className:"panel space-y-4",children:[e.jsx("h4",{className:"panel-title",children:t("tools.disk.availableDrives")}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:N&&Array.isArray(N)&&N.map(s=>{const l=s.totalBytes-s.freeBytes,m=l/s.totalBytes*100,u=s.freeBytes/s.totalBytes*100,b=P(s.name),S=x?.driveStatuses&&Array.isArray(x.driveStatuses)?x.driveStatuses.find(ce=>ce.driveName===s.name):void 0,E=d===s.name,L=b?.enabled??!1;return e.jsxs("div",{className:`p-4 rounded-lg border cursor-pointer transition-colors ${E?"border-sky-500 bg-slate-900/70":L?"border-slate-700 bg-slate-900/50":"border-slate-800 bg-slate-900/30"} ${S?.isBelowThreshold?"border-red-500/50":""}`,onClick:()=>z(E?null:s.name),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{size:18,className:L?"text-sky-400":"text-slate-500"}),e.jsx("span",{className:"font-semibold text-white",children:s.name}),S?.isBelowThreshold&&e.jsx(We,{size:16,className:"text-red-400"})]}),L&&e.jsx("span",{className:"text-xs text-sky-400 bg-sky-900/30 px-2 py-0.5 rounded",children:t("tools.disk.monitoredBadge")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-3 rounded-full overflow-hidden",style:{backgroundColor:w.colors.border.muted},children:e.jsxs("div",{className:"h-full flex",children:[e.jsx("div",{style:{width:`${m}%`,backgroundColor:w.colors.accent.primary},title:t("tools.disk.usedTooltip",{value:q(l)})}),e.jsx("div",{style:{width:`${u}%`,backgroundColor:w.colors.text.muted},title:t("tools.disk.freeTooltip",{value:q(s.freeBytes)})})]})}),e.jsxs("div",{className:"text-xs text-slate-400 space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:t("tools.disk.total")}),e.jsx("span",{className:"text-slate-300",children:q(s.totalBytes)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:t("tools.disk.used")}),e.jsxs("span",{className:"text-slate-300",children:[q(l)," (",m.toFixed(1),"%)"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:t("tools.disk.free")}),e.jsxs("span",{className:"text-slate-300",children:[q(s.freeBytes)," (",u.toFixed(1),"%)"]})]})]})]})]},s.name)})})]}),d&&i&&e.jsxs("div",{className:"panel space-y-4",children:[e.jsx("h4",{className:"panel-title",children:t("tools.disk.configureDrive",{drive:d})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(W,{label:t("tools.disk.enableDrive"),description:`Monitor ${d} drive`,enabled:c?.enabled??!1,onChange:s=>h(d,{enabled:s}),icon:e.jsx(ne,{size:18})}),(c?.enabled??!1)&&e.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-slate-800",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:t("tools.disk.checkInterval")}),e.jsx("input",{type:"number",min:1,max:1440,className:"input-text",value:c?.checkIntervalMinutes??15,onChange:s=>h(d,{checkIntervalMinutes:Number(s.target.value)})}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:t("tools.disk.checkIntervalHint")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-2",children:t("tools.disk.thresholdTitle")}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300 mb-1",children:[e.jsx("input",{type:"radio",name:`threshold-type-${d}`,checked:c?.thresholdPercent!==null&&c?.thresholdPercent!==void 0,onChange:()=>h(d,{thresholdPercent:10,thresholdBytes:null}),className:"radio"}),t("tools.disk.thresholdPercent")]}),c?.thresholdPercent!==null&&c?.thresholdPercent!==void 0&&e.jsx("input",{type:"number",min:1,max:100,className:"input-text mt-1",value:c.thresholdPercent,onChange:s=>h(d,{thresholdPercent:Number(s.target.value)})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300 mb-1",children:[e.jsx("input",{type:"radio",name:`threshold-type-${d}`,checked:c?.thresholdBytes!==null&&c?.thresholdBytes!==void 0,onChange:()=>h(d,{thresholdBytes:1024*1024*1024,thresholdPercent:null}),className:"radio"}),t("tools.disk.thresholdBytes")]}),c?.thresholdBytes!==null&&c?.thresholdBytes!==void 0&&e.jsx("input",{type:"number",min:0,step:1,className:"input-text mt-1",value:Math.round(c.thresholdBytes/(1024*1024)),onChange:s=>h(d,{thresholdBytes:Number(s.target.value)*1024*1024})})]})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:t("tools.disk.thresholdHint")})]}),f&&e.jsxs("div",{className:`p-3 rounded-lg border ${f.isBelowThreshold?"border-red-500/50 bg-red-900/20":"border-slate-800 bg-slate-900/30"}`,children:[e.jsx("p",{className:"text-sm font-semibold text-white mb-1",children:t("tools.disk.statusCardTitle")}),e.jsxs("p",{className:"text-xs text-slate-400",children:[q(f.freeBytes)," ",t("tools.disk.free")," (",f.freePercent.toFixed(1),"%)",f.isBelowThreshold&&e.jsxs("span",{className:"text-red-400 ml-2",children:["⚠ ",t("tools.disk.belowThreshold")]})]}),f.lastAlertSent&&e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:t("tools.disk.lastAlert",{value:re(f.lastAlertSent)})})]})]})]})]}),e.jsxs("div",{className:"panel space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"panel-title",children:t("tools.disk.folderMonitoring")}),e.jsx("button",{className:"btn-outline text-xs",onClick:()=>{j(s=>({...s,folderMonitors:[...s.folderMonitors,{path:"",enabled:!0,checkIntervalMinutes:15,thresholdBytes:1024*1024*1024,thresholdDirection:"Over"}]}))},children:t("tools.disk.addFolder")})]}),C.folderMonitors.length===0?e.jsx("p",{className:"text-sm text-slate-400",children:t("tools.disk.noFolders")}):e.jsx("div",{className:"space-y-3",children:Array.isArray(C.folderMonitors)&&C.folderMonitors.map((s,l)=>e.jsxs("div",{className:"p-4 border border-slate-800 rounded-lg space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(W,{label:t("tools.disk.enableFolder"),description:J(s.path)||"Folder monitor",enabled:s.enabled,onChange:m=>{j(u=>({...u,folderMonitors:Array.isArray(u.folderMonitors)?u.folderMonitors.map((b,S)=>S===l?{...b,enabled:m}:b):[]}))},icon:e.jsx(xe,{size:18})}),e.jsx("button",{className:"icon-btn text-red-400",onClick:()=>{j(m=>({...m,folderMonitors:Array.isArray(m.folderMonitors)?m.folderMonitors.filter((u,b)=>b!==l):[]}))},children:e.jsx(H,{size:16})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:t("tools.disk.folderPath")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",className:"input-text flex-1",value:J(s.path),onChange:m=>{const u=m.target.value.replace(/\\\\/g,"\\");j(b=>({...b,folderMonitors:Array.isArray(b.folderMonitors)?b.folderMonitors.map((S,E)=>E===l?{...S,path:u}:S):[]}))},placeholder:t("tools.disk.folderPlaceholder")}),e.jsx("button",{className:"btn-outline",type:"button",onClick:()=>T(l),children:e.jsx(xe,{size:16})})]}),O===l&&e.jsx(Qe,{initialPath:s.path,onSelect:m=>{const u=m.replace(/\\\\/g,"\\");j(b=>({...b,folderMonitors:Array.isArray(b.folderMonitors)?b.folderMonitors.map((S,E)=>E===l?{...S,path:u}:S):[]})),T(null)},onCancel:()=>T(null)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:t("tools.disk.checkInterval")}),e.jsx("input",{type:"number",min:1,max:1440,className:"input-text",value:s.checkIntervalMinutes,onChange:m=>{j(u=>({...u,folderMonitors:Array.isArray(u.folderMonitors)?u.folderMonitors.map((b,S)=>S===l?{...b,checkIntervalMinutes:Number(m.target.value)}:b):[]}))}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:t("tools.disk.thresholdDirection")}),e.jsxs("select",{className:"input-text",value:s.thresholdDirection||"Over",onChange:m=>{j(u=>({...u,folderMonitors:Array.isArray(u.folderMonitors)?u.folderMonitors.map((b,S)=>S===l?{...b,thresholdDirection:m.target.value}:b):[]}))},children:[e.jsx("option",{value:"Over",children:t("tools.disk.thresholdOver")}),e.jsx("option",{value:"Under",children:t("tools.disk.thresholdUnder")})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:t("tools.disk.thresholdValue")}),e.jsx("input",{type:"number",min:0,step:1,className:"input-text",value:Math.round(s.thresholdBytes/(1024*1024)),onChange:m=>{j(u=>({...u,folderMonitors:Array.isArray(u.folderMonitors)?u.folderMonitors.map((b,S)=>S===l?{...b,thresholdBytes:Number(m.target.value)*1024*1024}:b):[]}))}})]}),e.jsx("p",{className:"text-xs text-slate-500",children:s.thresholdDirection==="Under"?t("tools.disk.thresholdSummaryUnder",{value:q(s.thresholdBytes)}):t("tools.disk.thresholdSummaryOver",{value:q(s.thresholdBytes)})})]},l))})]}),e.jsx(G,{name:"DiskMonitor",title:t("tools.disk.logTitle"),subfolder:"DiskMonitor"})]})}function ms({t}){const[w,k]=o.useState(!1),[I,d]=o.useState(!1),[z,O]=o.useState(null),[T,v]=o.useState(new Set),{data:n,mutate:x}=U("application-monitor-config",()=>A("/api/application-monitor/config")),[g,N]=o.useState({enabled:!1,applications:[],notificationRecipients:[]});o.useEffect(()=>{n&&N({...n,notificationRecipients:Array.isArray(n.notificationRecipients)?n.notificationRecipients:[]})},[n]);const C=o.useCallback(async()=>{k(!0);try{await A("/api/application-monitor/config",{method:"PUT",body:JSON.stringify(g)}),await x(),y(t("tools.app.saveSuccess"),"success")}catch(i){console.error("Failed to save application monitor config:",i);const c=i instanceof Error?i.message:String(i);y(t("tools.app.saveFailure",{message:c}),"error")}finally{k(!1)}},[g,x,t]),j=o.useCallback(()=>{const i=fe();N(c=>({...c,applications:[...c.applications,{id:i,name:"",executablePath:"",arguments:null,workingDirectory:null,enabled:!0,checkIntervalSeconds:60,restartDelaySeconds:5,logPath:null,eventLogSource:null}]})),v(c=>new Set([...c,i]))},[]),P=o.useCallback((i,c)=>{N(f=>({...f,applications:Array.isArray(f.applications)?f.applications.map(R=>R.id===i?{...R,...c}:R):[]}))},[]),h=o.useCallback(i=>{if(z){const c=i.replace(/\\\\/g,"\\");P(z,{executablePath:c})}d(!1),O(null)},[z,P]),F=o.useCallback(i=>{N(c=>({...c,applications:Array.isArray(c.applications)?c.applications.filter(f=>f.id!==i):[]}))},[]),M=o.useCallback(()=>{const i=window.prompt(t("tools.app.recipientPrompt"));i&&N(c=>{const f=Array.isArray(c.notificationRecipients)?c.notificationRecipients:[];return f.includes(i)?c:{...c,notificationRecipients:[...f,i]}})},[t]),$=o.useCallback(i=>{N(c=>({...c,notificationRecipients:Array.isArray(c.notificationRecipients)?c.notificationRecipients.filter(f=>f!==i):[]}))},[]);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"panel space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"panel-title mb-1",children:t("tools.app.title")}),e.jsx("p",{className:"text-sm text-slate-400",children:t("tools.app.subtitle")})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{className:"btn-primary",onClick:C,disabled:w,children:[e.jsx(oe,{size:16})," ",t(w?"tools.app.saving":"tools.app.save")]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(W,{label:t("tools.app.enable"),description:"Monitor application status",enabled:g.enabled,onChange:i=>N(c=>({...c,enabled:i})),icon:e.jsx(X,{size:18})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm text-slate-400",children:t("tools.app.recipients")}),e.jsx("button",{className:"btn-outline text-xs",onClick:M,children:t("tools.app.addRecipient")})]}),e.jsxs("div",{className:"space-y-1",children:[Array.isArray(g.notificationRecipients)&&g.notificationRecipients.map(i=>e.jsxs("div",{className:"flex items-center justify-between bg-slate-900/50 rounded px-2 py-1",children:[e.jsx("span",{className:"text-sm text-slate-300",children:i}),e.jsx("button",{className:"icon-btn",onClick:()=>$(i),children:"×"})]},i)),(!g.notificationRecipients||g.notificationRecipients.length===0)&&e.jsx("p",{className:"text-xs text-slate-500",children:t("tools.app.noRecipients")})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm text-slate-400",children:t("tools.app.listTitle")}),e.jsx("button",{className:"btn-outline text-xs",onClick:j,children:t("tools.app.addApplication")})]}),g.applications.length===0?e.jsx("p",{className:"text-sm text-slate-400",children:t("tools.app.empty")}):e.jsx("div",{className:"space-y-2",children:Array.isArray(g.applications)&&g.applications.map(i=>{const c=T.has(i.id);return e.jsxs("div",{className:"border border-slate-800 rounded-lg p-3 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(W,{label:i.name||t("tools.app.namePlaceholder"),description:`Check: ${i.checkIntervalSeconds}s | Restart: ${i.restartDelaySeconds}s`,enabled:i.enabled,onChange:f=>P(i.id,{enabled:f}),icon:e.jsx(X,{size:18})}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{className:"icon-btn text-slate-400 hover:text-white",onClick:()=>{v(f=>{const R=new Set(f);return R.has(i.id)?R.delete(i.id):R.add(i.id),R})},title:c?"Collapse":"Expand",children:c?e.jsx(De,{size:16}):e.jsx(Ke,{size:16})}),e.jsx("button",{className:"icon-btn text-red-400 hover:text-red-300",onClick:()=>F(i.id),title:"Delete",children:e.jsx(H,{size:14})})]})]}),c&&e.jsxs("div",{className:"p-4 space-y-3 border-t border-slate-800",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:t("tools.app.namePlaceholder")}),e.jsx("input",{type:"text",className:"input-text w-full",placeholder:t("tools.app.namePlaceholder"),value:i.name,onChange:f=>P(i.id,{name:f.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:t("tools.app.executablePath")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",className:"input-text flex-1",placeholder:t("tools.app.executablePlaceholder"),value:J(i.executablePath||""),onChange:f=>{const R=f.target.value.replace(/\\\\/g,"\\");P(i.id,{executablePath:R})}}),e.jsx("button",{className:"btn-outline",onClick:()=>{O(i.id),d(!0)},children:e.jsx(xe,{size:16})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:t("tools.app.checkInterval")}),e.jsx("input",{type:"number",min:1,max:3600,className:"input-text",value:i.checkIntervalSeconds,onChange:f=>P(i.id,{checkIntervalSeconds:Number(f.target.value)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:t("tools.app.restartDelay")}),e.jsx("input",{type:"number",min:0,max:300,className:"input-text",value:i.restartDelaySeconds,onChange:f=>P(i.id,{restartDelaySeconds:Number(f.target.value)})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:t("tools.app.arguments")}),e.jsx("input",{type:"text",className:"input-text",placeholder:t("tools.app.argumentsPlaceholder"),value:i.arguments||"",onChange:f=>P(i.id,{arguments:f.target.value||null})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:t("tools.app.workingDirectory")}),e.jsx("input",{type:"text",className:"input-text",placeholder:t("tools.app.workingPlaceholder"),value:J(i.workingDirectory||""),onChange:f=>{const R=f.target.value.replace(/\\\\/g,"\\");P(i.id,{workingDirectory:R||null})}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:t("tools.app.eventLogSource")}),e.jsx("input",{type:"text",className:"input-text w-full",placeholder:t("tools.app.eventLogPlaceholder"),value:i.eventLogSource||"",onChange:f=>P(i.id,{eventLogSource:f.target.value||null})}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:t("tools.app.eventLogHint")})]})]})]},i.id)})})]})]})]}),e.jsx(G,{name:"ApplicationMonitor",title:t("tools.app.logTitle"),subfolder:"ApplicationMonitor"}),I&&e.jsx(ns,{initialPath:z&&(g.applications||[]).find(i=>i.id===z)?.executablePath||"",onSelect:h,onCancel:()=>{d(!1),O(null)},fileExtensions:[".exe",".bat",".cmd",".com",".scr",".vbs",".js",".ps1"]})]})}function hs({t}){const[w,k]=o.useState(null),[I,d]=o.useState(!1),[z,O]=o.useState(!1),T=async n=>{O(!0),d(!1);try{if(w)try{await Ce(w.id)}catch{}const x=await Se(n);k(x),y(`Terminal created (${n})`,"success")}catch(x){y(`Failed to create terminal: ${x instanceof Error?x.message:"Unknown error"}`,"error")}finally{O(!1)}},v=async()=>{if(w)try{await Ce(w.id),k(null),y("Terminal closed","success")}catch(n){y(`Failed to close terminal: ${n instanceof Error?n.message:"Unknown error"}`,"error")}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"panel space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"panel-title mb-0",children:"Terminal"}),e.jsxs("div",{className:"flex items-center gap-2",children:[w&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"btn-outline",onClick:async()=>{try{const x=`/terminal-popup?id=${(await Se(w.shellType)).id}`;window.open(x,"_blank","width=800,height=600")}catch(n){y(`Failed to open popup: ${n instanceof Error?n.message:"Unknown error"}`,"error")}},title:"Open terminal in a new window",children:[e.jsx(ss,{size:16})," Open in Popup"]}),e.jsxs("button",{className:"btn-outline",onClick:v,children:[e.jsx(Y,{size:16})," Close Terminal"]})]}),e.jsxs("button",{className:"btn-primary",onClick:()=>d(!0),disabled:z,children:[e.jsx(pe,{size:16})," New Terminal"]})]})]}),I&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Select Shell"}),e.jsx("button",{className:"text-slate-400 hover:text-white",onClick:()=>d(!1),children:e.jsx(Y,{size:20})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{className:"w-full p-4 bg-slate-900/50 hover:bg-slate-900 border border-slate-700 rounded-lg text-left transition-colors",onClick:()=>T("cmd"),children:[e.jsx("div",{className:"font-medium text-white",children:"Command Prompt (cmd.exe)"}),e.jsx("div",{className:"text-sm text-slate-400 mt-1",children:"Windows Command Prompt"})]}),e.jsxs("button",{className:"w-full p-4 bg-slate-900/50 hover:bg-slate-900 border border-slate-700 rounded-lg text-left transition-colors",onClick:()=>T("powershell"),children:[e.jsx("div",{className:"font-medium text-white",children:"PowerShell"}),e.jsx("div",{className:"text-sm text-slate-400 mt-1",children:"Windows PowerShell"})]})]})]})}),w?e.jsx("div",{className:"h-[600px]",children:e.jsx(o.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-full bg-slate-900 rounded-lg border border-slate-800",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-sky-500 border-t-transparent rounded-full animate-spin mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Loading terminal..."})]})}),children:e.jsx(os,{sessionId:w.id,onClose:v})})}):e.jsxs("div",{className:"text-center py-12 text-slate-400",children:[e.jsx(pe,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg mb-2",children:"No active terminal"}),e.jsx("p",{className:"text-sm",children:'Click "New Terminal" to create one'})]})]}),e.jsx(us,{t})]})}function xs({t}){return e.jsx(G,{name:"Screenshots",title:t("tools.screenshots.logTitle"),subfolder:"Screenshots"})}function us({t}){return e.jsx(G,{name:"Terminal",title:t("tools.terminal.logTitle"),subfolder:"Terminal"})}function ps({t}){return e.jsx(G,{name:"VNC",title:t("tools.vnc.logTitle"),subfolder:"VNC"})}function fs({t}){const[w,k]=o.useState(!1),[I,d]=o.useState(!1),[z,O]=o.useState(""),[T,v]=o.useState([]),[n,x]=o.useState(null),[g,N]=o.useState(!1),{data:C}=U("vnc-config",()=>A("/api/vnc/config")),{data:j,mutate:P}=U("vnc-status",()=>A("/api/vnc/status"),{refreshInterval:2e3,revalidateOnFocus:!0,revalidateOnReconnect:!0});o.useEffect(()=>{P()},[P]),o.useEffect(()=>{const s=localStorage.getItem("weasel.vnc.profiles");if(s)try{const l=JSON.parse(s),m=l.map(u=>u.isDefault&&u.name==="Weasel Internal VNC Server"?{...u,name:"Weasel VNC Server"}:u);JSON.stringify(l)!==JSON.stringify(m)&&localStorage.setItem("weasel.vnc.profiles",JSON.stringify(m)),v(m)}catch(l){console.error("Failed to load VNC profiles:",l)}if(!s||JSON.parse(s).length===0){const l={id:fe(),name:"Weasel VNC Server",server:j?.allowRemote?window.location.hostname:"127.0.0.1",port:C?.port||5900,viewOnly:!1,shared:!0,encrypt:!1,resize:!1,quality:6,compression:2,isDefault:!0};v([l]),localStorage.setItem("weasel.vnc.profiles",JSON.stringify([l]))}},[C,j]);const h=async()=>{k(!0);try{await A("/api/vnc/start",{method:"POST"}),await P(),y(t("tools.vnc.startSuccess"),"success")}catch(s){y(t("tools.vnc.startFailure",{message:s instanceof Error?s.message:String(s)}),"error")}finally{k(!1)}},F=async()=>{d(!0);try{await A("/api/vnc/stop",{method:"POST"}),await P(),y(t("tools.vnc.stopSuccess"),"success")}catch(s){y(t("tools.vnc.stopFailure",{message:s instanceof Error?s.message:String(s)}),"error")}finally{d(!1)}},M=async s=>{console.log("[VNC] Connecting to profile:",s.name,s);let l=s.password;if(s.isDefault&&!l&&C?.hasPassword)try{console.log("[VNC] Fetching password for default profile"),l=(await A("/api/vnc/password")).password,console.log("[VNC] Password fetched successfully")}catch(S){console.error("Failed to fetch VNC password:",S),y("Failed to retrieve VNC server password","error");return}else if(!s.isDefault&&!l){console.log("[VNC] Prompting for password for non-default profile");const S=prompt(`Enter password for ${s.name} (leave empty if no password):`);S?(l=S,console.log("[VNC] Password entered")):console.log("[VNC] No password entered")}console.log("[VNC] Password available:",!!l),console.log("[VNC] Password length:",l?.length||0),l&&l.length>0&&console.log("[VNC] Password check (first/last char):",l.charAt(0),l.charAt(l.length-1)),localStorage.setItem("vnc_host",s.server),localStorage.setItem("vnc_port",s.port.toString()),localStorage.setItem("vnc_viewOnly",s.viewOnly.toString()),localStorage.setItem("vnc_shared",s.shared.toString()),localStorage.setItem("vnc_quality",s.quality.toString()),localStorage.setItem("vnc_compression",s.compression.toString()),l?localStorage.setItem("vnc_password",l):localStorage.removeItem("vnc_password");const m=new URLSearchParams;m.set("host",s.server),m.set("port",s.port.toString()),m.set("viewOnly",s.viewOnly.toString()),m.set("shared",s.shared.toString()),m.set("quality",s.quality.toString()),m.set("compression",s.compression.toString()),m.set("profileId",s.id),m.set("profileName",s.name),l&&m.set("password",l);const u=`/vnc-viewer?${m.toString()}`;console.log("[VNC] Opening popup with URL:",u);const b=window.open(u,`VNC Viewer - ${s.name}`,`width=${screen.width},height=${screen.height},fullscreen=yes,resizable=yes,scrollbars=no`);console.log("[VNC] Popup opened:",!!b,"closed:",b?.closed),!b||b.closed||typeof b.closed>"u"?(console.error("[VNC] Popup blocked or failed to open"),y("Popup blocked. Please allow popups for this site to connect to VNC.","error")):console.log("[VNC] Connection successful")},$=()=>{const s={id:fe(),name:"New VNC Server",server:"localhost",port:5900,viewOnly:!1,shared:!1,encrypt:!1,resize:!1,quality:6,compression:2,isDefault:!1};x(s),N(!0)},i=s=>{x({...s}),N(!0)},c=()=>{if(!n)return;const s=T.find(l=>l.id===n.id)?T.map(l=>l.id===n.id?n:l):[...T,n];v(s),localStorage.setItem("weasel.vnc.profiles",JSON.stringify(s)),N(!1),x(null),y("VNC profile saved successfully","success")},f=s=>{if(T.find(u=>u.id===s)?.isDefault){y("Cannot delete the default internal VNC server profile","error");return}const m=T.filter(u=>u.id!==s);v(m),localStorage.setItem("weasel.vnc.profiles",JSON.stringify(m)),y("VNC profile deleted successfully","success")};if(!C)return e.jsx("div",{className:"text-sm text-slate-400",children:t("tools.vnc.loading")});const R=j?.allowRemote?window.location.hostname:"127.0.0.1",V=j?.isRunning?`${R}:${j.port}`:null;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"panel space-y-4",children:[e.jsx("h3",{className:"panel-title mb-0",children:t("tools.vnc.statusTitle")}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-slate-400",children:t("tools.vnc.status")}),e.jsx("span",{className:`text-sm font-semibold ${j?.isRunning?"text-green-400":"text-slate-400"}`,children:j?.isRunning?t("tools.vnc.running"):t("tools.vnc.stopped")})]}),j?.isRunning&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-slate-400",children:t("tools.vnc.connections")}),e.jsx("span",{className:"text-sm font-semibold text-white",children:j.connectionCount})]}),V&&e.jsxs("div",{className:"bg-slate-900/60 rounded-lg p-3 border border-slate-800",children:[e.jsx("p",{className:"text-xs text-slate-400 mb-1",children:t("tools.vnc.connectionInfo")}),e.jsx("p",{className:"text-sm font-mono text-white",children:V}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:t("tools.vnc.connectionHint")})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[j?.isRunning?e.jsx("button",{className:"btn-outline flex-1",onClick:F,disabled:w||I,children:t(I?"tools.vnc.stopping":"tools.vnc.stop")}):e.jsx("button",{className:"btn-primary flex-1",onClick:h,disabled:w||I||!C.enabled,children:w?t("tools.vnc.starting"):"Start Server"}),e.jsx("button",{className:"btn-outline",onClick:()=>P(),children:e.jsx(ie,{size:16})})]})]})]}),e.jsxs("div",{className:"panel space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"panel-title mb-0",children:"VNC Server Profiles"}),e.jsxs("button",{className:"btn-outline text-xs",onClick:$,children:[e.jsx(X,{size:14})," Add Profile"]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[T.map(s=>e.jsxs("div",{className:`p-4 rounded-lg border transition-colors ${s.isDefault?"border-sky-500/50 bg-sky-900/20":"border-slate-800 bg-slate-900/30"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-white truncate",children:s.name}),s.isDefault&&e.jsx("span",{className:"text-xs text-sky-400 bg-sky-900/30 px-2 py-0.5 rounded mt-1 inline-block",children:"Default"})]}),e.jsxs("div",{className:"flex gap-1 ml-2",children:[e.jsx("button",{className:"icon-btn text-slate-400 hover:text-white",onClick:()=>i(s),title:"Edit",children:e.jsx(ts,{size:14})}),!s.isDefault&&e.jsx("button",{className:"icon-btn text-red-400 hover:text-red-300",onClick:()=>f(s.id),title:"Delete",children:e.jsx(H,{size:14})})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between text-slate-400",children:[e.jsx("span",{children:"Server:"}),e.jsxs("span",{className:"text-white font-mono truncate ml-2",children:[s.server,":",s.port]})]}),e.jsxs("div",{className:"flex justify-between text-slate-400",children:[e.jsx("span",{children:"View Only:"}),e.jsx("span",{className:s.viewOnly?"text-green-400":"text-slate-500",children:s.viewOnly?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between text-slate-400",children:[e.jsx("span",{children:"Shared:"}),e.jsx("span",{className:s.shared?"text-green-400":"text-slate-500",children:s.shared?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between text-slate-400",children:[e.jsx("span",{children:"Quality:"}),e.jsx("span",{className:"text-white",children:s.quality})]}),e.jsxs("div",{className:"flex justify-between text-slate-400",children:[e.jsx("span",{children:"Compression:"}),e.jsx("span",{className:"text-white",children:s.compression})]}),s.encrypt&&e.jsxs("div",{className:"flex items-center gap-1 text-green-400 text-xs",children:[e.jsx(Ye,{size:12}),e.jsx("span",{children:"Encrypted"})]})]}),e.jsxs("button",{className:"btn-primary w-full mt-3",onClick:()=>{M(s).catch(l=>{console.error("[VNC] Connection error:",l),y(`Failed to connect: ${l instanceof Error?l.message:String(l)}`,"error")})},children:[e.jsx(ue,{size:14})," Connect"]})]},s.id)),T.length===0&&e.jsxs("div",{className:"col-span-full text-center py-8 text-slate-400",children:[e.jsx(X,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No VNC server profiles configured"}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:'Click "Add Profile" to create one'})]})]})]}),g&&n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white",children:[T.find(s=>s.id===n.id)?"Edit":"Add"," VNC Server Profile"]}),e.jsx("button",{className:"text-slate-400 hover:text-white",onClick:()=>{N(!1),x(null)},children:e.jsx(Y,{size:20})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Profile Name"}),e.jsx("input",{type:"text",className:"input-text w-full",value:n.name,onChange:s=>x({...n,name:s.target.value}),placeholder:"My VNC Server"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Server/IP"}),e.jsx("input",{type:"text",className:"input-text w-full",value:n.server,onChange:s=>x({...n,server:s.target.value}),placeholder:"localhost or 192.168.1.100",disabled:n.isDefault})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Port"}),e.jsx("input",{type:"number",className:"input-text w-full",value:n.port,onChange:s=>x({...n,port:parseInt(s.target.value)||5900}),disabled:n.isDefault})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"viewOnly",className:"checkbox",checked:n.viewOnly,onChange:s=>x({...n,viewOnly:s.target.checked})}),e.jsx("label",{htmlFor:"viewOnly",className:"text-sm text-slate-300",children:"View Only"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"shared",className:"checkbox",checked:n.shared,onChange:s=>x({...n,shared:s.target.checked})}),e.jsx("label",{htmlFor:"shared",className:"text-sm text-slate-300",children:"Shared"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"encrypt",className:"checkbox",checked:n.encrypt,onChange:s=>x({...n,encrypt:s.target.checked})}),e.jsx("label",{htmlFor:"encrypt",className:"text-sm text-slate-300",children:"Encrypt"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"resize",className:"checkbox",checked:n.resize,onChange:s=>x({...n,resize:s.target.checked})}),e.jsx("label",{htmlFor:"resize",className:"text-sm text-slate-300",children:"Resize"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Quality (0-9)"}),e.jsx("input",{type:"number",min:"0",max:"9",className:"input-text w-full",value:n.quality,onChange:s=>x({...n,quality:Math.min(9,Math.max(0,parseInt(s.target.value)||0))})}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"0 = best quality, 9 = best compression"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Compression (0-9)"}),e.jsx("input",{type:"number",min:"0",max:"9",className:"input-text w-full",value:n.compression,onChange:s=>x({...n,compression:Math.min(9,Math.max(0,parseInt(s.target.value)||0))})}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"0 = no compression, 9 = max compression"})]})]}),!n.isDefault&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Repeater ID (optional)"}),e.jsx("input",{type:"text",className:"input-text w-full",value:n.repeaterId||"",onChange:s=>x({...n,repeaterId:s.target.value||void 0}),placeholder:"ID:1234567890"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Password (optional)"}),e.jsx("input",{type:"password",className:"input-text w-full",value:n.password||"",onChange:s=>x({...n,password:s.target.value||void 0}),placeholder:"Leave empty to prompt on connect"})]})]}),n.isDefault&&e.jsx("div",{className:"bg-blue-900/20 border border-blue-500/50 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-blue-200",children:[e.jsx("strong",{children:"Note:"})," This is the internal Weasel VNC Server. Server, port, and password settings are managed in Settings → VNC."]})}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsxs("button",{className:"btn-primary flex-1",onClick:c,children:[e.jsx(oe,{size:16})," Save Profile"]}),e.jsx("button",{className:"btn-outline flex-1",onClick:()=>{N(!1),x(null)},children:"Cancel"})]})]})]})}),e.jsx(ps,{t})]})}export{Ts as default};
