const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-30iCMrGg.js","assets/vendor-editor-Cbnfy5IV.js","assets/vendor-utils-BeCPKUKe.js","assets/index-eo1TGWw1.js","assets/vendor-terminal-Co9mG8Of.js","assets/vendor-terminal-C0BCwPpi.css","assets/index-BPf1Me4P.css"])))=>i.map(i=>d[i]);
import{c as j,r as n,j as e,u as Re,g as bs,a as js,b as p,H as ks,X as T,A as _,d as K,S as Ct,f as St,P as zt,e as ws,h as X,C as vs,i as Pt,s as h,F as Ft,_ as Ns}from"./index-eo1TGWw1.js";import{U as Dt,P as Et,R as At}from"./upload-DaWIM8PZ.js";import{F as pe}from"./folder-CD3APD0O.js";import{D as ge}from"./download-CJmUCV6L.js";import{T as ye}from"./trash-2-DoblI2a6.js";import{A as Mt,S as Cs}from"./search-Chk4FxI0.js";import{S as Lt,F as Ss,I as zs}from"./square-check-big-DGF37uqL.js";import{E as be}from"./eye-CKXl4JVb.js";import{V as Ps}from"./video-DmjQggs5.js";import"./vendor-terminal-Co9mG8Of.js";import"./vendor-utils-BeCPKUKe.js";/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=j("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=j("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=j("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=j("FileArchive",[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=j("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=j("FilePen",[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=j("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=j("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=j("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=j("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=j("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=j("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=j("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);function Is({x:o,y:i,items:r,onClose:x}){const d=n.useRef(null);n.useEffect(()=>{const k=N=>{d.current&&!d.current.contains(N.target)&&x()};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[x]);const R={top:i,left:o};return e.jsx("div",{ref:d,className:"fixed z-50 bg-slate-800 border border-slate-700 rounded-lg shadow-xl py-1 min-w-[160px]",style:R,children:r.map((k,N)=>e.jsxs("button",{className:`w-full text-left px-4 py-2 text-sm flex items-center gap-2 hover:bg-slate-700 ${k.danger?"text-red-400 hover:text-red-300":"text-slate-200 hover:text-white"}`,onClick:()=>{k.onClick(),x()},children:[k.icon&&e.jsx("span",{className:"w-4 h-4",children:k.icon}),k.label]},N))})}const Os=n.lazy(()=>Ns(()=>import("./index-30iCMrGg.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),Ts=async o=>{const i=new URL("/api/fs",window.location.origin);return o&&i.searchParams.set("path",o),p(i.toString())},Rs=()=>p("/api/fs/drives"),qt=o=>o.replace(/\//g,"\\"),ke=o=>{if(!o)return"";const i=qt(o);return i.endsWith("\\")?i:`${i}\\`},Ue=o=>{if(!o)return"";let i=qt(o).replace(/\\+$/,"");if(i.startsWith("\\\\")){const d=i.split("\\").filter(Boolean);return d.length<=2?`\\\\${d.join("\\")}\\`:(d.pop(),`\\\\${d.join("\\")}\\`)}if(i.endsWith(":"))return`${i}\\`;const x=i.lastIndexOf("\\");return x<=1?`${i.slice(0,x+1)}\\`:`${i.slice(0,x)}\\`},je=(o,i)=>o?`${ke(o)}${i}`:i,$s=o=>{switch(o.split(".").pop()?.toLowerCase()){case"js":case"jsx":return"javascript";case"ts":case"tsx":return"typescript";case"json":return"json";case"css":return"css";case"html":return"html";case"cs":return"csharp";case"sql":return"sql";case"xml":return"xml";case"md":return"markdown";case"yml":case"yaml":return"yaml";default:return"plaintext"}},Us=o=>{const i=o.split(".").pop()?.toLowerCase();return["png","jpg","jpeg","gif","bmp","webp","svg","ico"].includes(i||"")},Q=o=>{const i=o.split(".").pop()?.toLowerCase()||"";return["png","jpg","jpeg","gif","bmp","webp","svg","ico","tiff","tif"].includes(i)?"image":["mp4","webm","mkv","avi","mov","wmv","flv","m4v"].includes(i)?"video":["mp3","wav","ogg","flac","aac","wma","m4a"].includes(i)?"audio":["zip","rar","7z","tar","gz","bz2","xz","tgz"].includes(i)?"archive":["js","jsx","ts","tsx","cs","py","java","cpp","c","h","hpp","go","rs","rb","php","swift","kt","scala","sql","html","css","scss","less","vue","svelte"].includes(i)?"code":["txt","md","log","json","xml","yml","yaml","ini","cfg","conf","env","gitignore","dockerignore","editorconfig","csv","tsv"].includes(i)?"text":["exe","msi","bat","cmd","ps1","sh","dll","so","dylib"].includes(i)?"executable":["pdf","doc","docx","xls","xlsx","ppt","pptx","odt","ods","odp"].includes(i)?"document":"unknown"},Ut=o=>{const i=Q(o);return i==="code"||i==="text"},Bt=o=>{const i=Q(o);return i==="code"||i==="text"},Bs=o=>{const i=Q(o),r=o.split(".").pop()?.toLowerCase()||"";switch(i){case"image":return{icon:e.jsx(zs,{size:18}),color:"text-green-300"};case"video":return{icon:e.jsx(Ps,{size:18}),color:"text-pink-300"};case"audio":return{icon:e.jsx(Ms,{size:18}),color:"text-purple-300"};case"archive":return{icon:e.jsx(Be,{size:18}),color:"text-amber-300"};case"code":return{icon:e.jsx(Es,{size:18}),color:"text-blue-300"};case"text":return{icon:e.jsx(Ft,{size:18}),color:"text-slate-300"};case"executable":return{icon:e.jsx(Ds,{size:18}),color:"text-red-300"};case"document":return["xls","xlsx","ods","csv"].includes(r)?{icon:e.jsx(As,{size:18}),color:"text-emerald-300"}:{icon:e.jsx(Ft,{size:18}),color:"text-orange-300"};default:return{icon:e.jsx(Ss,{size:18}),color:"text-slate-400"}}};function Ys(){const{data:o}=Re("file-explorer-settings",bs),i=o?.homeFolder||"",[r,x]=n.useState(""),[d,R]=n.useState(null),[k,N]=n.useState(""),[qe,Ve]=n.useState(!1),[Je,we]=n.useState(!1),[We,G]=n.useState(!1),[c,F]=n.useState(new Set),[C,$]=n.useState(null),[S,He]=n.useState(()=>{try{const t=localStorage.getItem("weasel.bookmarks");return t?JSON.parse(t):[]}catch{return[]}}),[Y,ve]=n.useState(!1),[z,Ze]=n.useState(""),[_e,ee]=n.useState(!1),[U,Ke]=n.useState(null),[Vt,te]=n.useState(""),[A,Ne]=n.useState(!1),[M,Ce]=n.useState(null),{t:se}=js(),[g,Jt]=n.useState({key:"name",direction:"asc"}),[Se,Wt]=n.useState(()=>{const t=localStorage.getItem("weasel.layout.leftPanelWidth");return t?parseInt(t):33}),[ae,ne]=n.useState(null),[le,Xe]=n.useState(!1),[B,Ht]=n.useState(()=>{const t=localStorage.getItem("weasel.files.foldersPageSize");return t?parseInt(t):50}),[ze,Qe]=n.useState(1),[q,Zt]=n.useState(()=>{const t=localStorage.getItem("weasel.files.filesPageSize");return t?parseInt(t):50}),[Pe,Ge]=n.useState(1),[P,V]=n.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{},variant:"info"});n.useEffect(()=>{const t=localStorage.getItem("weasel.lastPath");t&&!r&&x(t)},[]),n.useEffect(()=>{r&&localStorage.setItem("weasel.lastPath",r)},[r]);const{data:D,mutate:Ye,isLoading:ie,error:et}=Re(r,Ts,{revalidateOnFocus:!1}),{data:tt}=Re("drives",Rs,{revalidateOnFocus:!1}),Fe=Array.isArray(tt)?tt:[],re=n.useMemo(()=>(Array.isArray(D)?D:[]).filter(s=>s.isDirectory),[D]),oe=n.useMemo(()=>(Array.isArray(D)?D:[]).filter(s=>!s.isDirectory),[D]),st=n.useMemo(()=>{if(!Array.isArray(re))return[];if(!z)return re;const t=z.toLowerCase();return re.filter(s=>s.name.toLowerCase().includes(t))},[re,z]),at=n.useMemo(()=>{if(!Array.isArray(oe))return[];if(!z)return oe;const t=z.toLowerCase();return oe.filter(s=>s.name.toLowerCase().includes(t))},[oe,z]),ce=n.useCallback(t=>[...t].sort((s,a)=>{let l=0;switch(g.key){case"name":l=s.name.localeCompare(a.name);break;case"size":l=s.sizeBytes-a.sizeBytes;break;case"date":l=new Date(s.modifiedAt).getTime()-new Date(a.modifiedAt).getTime();break}return g.direction==="asc"?l:-l}),[g]),de=n.useMemo(()=>ce(st),[st,ce]),me=n.useMemo(()=>ce(at),[at,ce]),y=n.useMemo(()=>{if(B===0)return de;const t=(ze-1)*B,s=t+B;return de.slice(t,s)},[de,B,ze]),b=n.useMemo(()=>{if(q===0)return me;const t=(Pe-1)*q,s=t+q;return me.slice(t,s)},[me,q,Pe]),J=t=>{Jt(s=>({key:t,direction:s.key===t&&s.direction==="asc"?"desc":"asc"}))},_t=t=>{Ht(t),Qe(1),localStorage.setItem("weasel.files.foldersPageSize",t.toString())},Kt=t=>{Zt(t),Ge(1),localStorage.setItem("weasel.files.filesPageSize",t.toString())},u=n.useCallback(()=>Ye(),[Ye]);n.useEffect(()=>{if(!Y)return;const t=s=>{s.target.closest(".relative")||ve(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[Y]),n.useEffect(()=>{const t=s=>{s.target instanceof HTMLInputElement||s.target instanceof HTMLTextAreaElement||d||(s.ctrlKey&&s.key==="c"&&c.size>0?(s.preventDefault(),gt()):s.ctrlKey&&s.key==="x"&&c.size>0?(s.preventDefault(),yt()):s.ctrlKey&&s.key==="v"&&C?(s.preventDefault(),bt()):s.key==="Delete"&&c.size>0?(s.preventDefault(),pt()):s.ctrlKey&&s.key==="a"?(s.preventDefault(),ss()):s.key==="Escape"?(s.preventDefault(),w()):(s.key==="F5"||s.ctrlKey&&s.key==="r")&&(s.preventDefault(),u()))};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[c,C,d]);const nt=t=>{x(ke(t.fullPath)),Le()},Xt=async t=>{we(!0);try{const s=new URL("/api/fs/content",window.location.origin);s.searchParams.set("path",t);const a=await fetch(s.toString());if(!a.ok)throw new Error(await a.text());const l=await a.text();N(l)}finally{we(!1)}},lt=async t=>{R(t.fullPath),G(!1),await Xt(t.fullPath)},Qt=async t=>{if(t.target.files?.length){if(!r){h("Select a folder before uploading files.","warning"),t.target.value="";return}try{for(const s of Array.from(t.target.files)){const a=new FormData;a.append("path",ke(r)),a.append("file",s,s.name),await Pt(a)}await u(),h("Files uploaded successfully","success")}catch(s){h(`Upload failed: ${s instanceof Error?s.message:"Unknown error"}`,"error")}finally{t.target.value=""}}},[ue,it]=n.useState(""),[Gt,L]=n.useState(!1),rt=async()=>{if(ue.trim()){if(!r){h("Select a folder before creating a new folder.","warning");return}try{await p("/api/fs/directory",{method:"POST",body:JSON.stringify({parentPath:r,name:ue.trim()})}),await u(),it(""),L(!1),h("Folder created successfully","success")}catch(t){h(`Failed to create folder: ${t instanceof Error?t.message:"Unknown error"}`,"error")}}},[he,ot]=n.useState(""),[Yt,I]=n.useState(!1),ct=()=>{if(!he.trim())return;const t=je(r,he.trim());R(t),N(""),G(!0),ot(""),I(!1)},[De,dt]=n.useState(null),Ee=async t=>{dt(t),V({isOpen:!0,title:"Delete Item",message:`Are you sure you want to delete "${t.name}"?`,onConfirm:async()=>{if(De)try{const s=new URL("/api/fs",window.location.origin);s.searchParams.set("path",De.fullPath),await p(s.toString(),{method:"DELETE"}),d===De.fullPath&&Le(),await u(),h("Item deleted successfully","success")}catch(s){h(`Failed to delete: ${s instanceof Error?s.message:"Unknown error"}`,"error")}finally{dt(null),V({...P,isOpen:!1})}},variant:"danger"})},[W,mt]=n.useState(null),[O,Ae]=n.useState(""),[es,E]=n.useState(!1),Me=async t=>{mt(t),Ae(t.name),E(!0)},ut=async()=>{if(!W||!O.trim()||O===W.name){E(!1);return}try{await p("/api/fs/rename",{method:"POST",body:JSON.stringify({path:W.fullPath,newName:O.trim()})}),await u(),h("Item renamed successfully","success")}catch(t){h(`Failed to rename: ${t instanceof Error?t.message:"Unknown error"}`,"error")}finally{mt(null),Ae(""),E(!1)}},ts=async()=>{if(d){Ve(!0);try{await p("/api/fs/write",{method:"POST",body:JSON.stringify({path:d,content:k})}),await u(),G(!1)}finally{Ve(!1)}}},Le=()=>{R(null),N(""),G(!1),we(!1)},ht=t=>{F(s=>{const a=new Set(s);return a.has(t.fullPath)?a.delete(t.fullPath):a.add(t.fullPath),a})},ss=()=>{const t=Array.isArray(y)?y:[],s=Array.isArray(b)?b:[],a=new Set([...t,...s].map(l=>l.fullPath));F(a)},as=()=>{const t=Array.isArray(y)?y:[];F(s=>{const a=new Set(s);return t.forEach(l=>a.add(l.fullPath)),a})},ns=()=>{const t=Array.isArray(y)?y:[],s=new Set(t.map(a=>a.fullPath));F(a=>{const l=new Set(a);return s.forEach(f=>l.delete(f)),l})},ls=()=>{const t=Array.isArray(b)?b:[];F(s=>{const a=new Set(s);return t.forEach(l=>a.add(l.fullPath)),a})},is=()=>{const t=Array.isArray(b)?b:[],s=new Set(t.map(a=>a.fullPath));F(a=>{const l=new Set(a);return s.forEach(f=>l.delete(f)),l})},w=()=>{F(new Set)},H=n.useMemo(()=>{const t=Array.isArray(y)?y:[];if(t.length===0)return"none";const s=t.filter(a=>c.has(a.fullPath)).length;return s===0?"none":s===t.length?"all":"partial"},[y,c]),Z=n.useMemo(()=>{const t=Array.isArray(b)?b:[];if(t.length===0)return"none";const s=t.filter(a=>c.has(a.fullPath)).length;return s===0?"none":s===t.length?"all":"partial"},[b,c]),xt=async t=>{if(t.isDirectory){const s=`${t.name}_${new Date().toISOString().slice(0,10)}.zip`,a=je(r||Ue(t.fullPath),s);try{await p("/api/fs/bulk/zip",{method:"POST",body:JSON.stringify({sourcePaths:[t.fullPath],zipFilePath:a})}),X(a),setTimeout(async()=>{try{await p("/api/fs/bulk/delete",{method:"POST",body:JSON.stringify({paths:[a]})}),await u()}catch{}},2e3)}catch(l){h(`Failed to zip folder: ${l instanceof Error?l.message:String(l)}`,"error")}}else X(t.fullPath)},rs=async()=>{if(c.size===0)return;const t=Array.from(c);if(t.length===1){const a=D?.find(l=>l.fullPath===t[0]);a?await xt(a):X(t[0]);return}const s=new URL("/api/fs/download/bulk",window.location.origin);await fetch(s.toString(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paths:t})}).then(async a=>{if(a.ok){const l=await a.blob(),f=window.URL.createObjectURL(l),v=document.createElement("a");v.href=f,v.download=`download_${new Date().toISOString().slice(0,10)}.zip`,document.body.appendChild(v),v.click(),document.body.removeChild(v),window.URL.revokeObjectURL(f)}}),w(),await u()},[os,ft]=n.useState(0),pt=async()=>{c.size!==0&&(ft(c.size),V({isOpen:!0,title:"Delete Items",message:`Are you sure you want to delete ${c.size} item(s)?`,onConfirm:async()=>{try{await p("/api/fs/bulk/delete",{method:"POST",body:JSON.stringify({paths:Array.from(c)})}),w(),await u(),h(`${os} item(s) deleted successfully`,"success")}catch(t){h(`Failed to delete items: ${t instanceof Error?t.message:"Unknown error"}`,"error")}finally{ft(0),V({...P,isOpen:!1})}},variant:"danger"}))},gt=()=>{c.size!==0&&$({items:Array.from(c),operation:"copy"})},yt=()=>{c.size!==0&&$({items:Array.from(c),operation:"cut"})},bt=async()=>{if(!(!C||!r))try{C.operation==="copy"?await p("/api/fs/bulk/copy",{method:"POST",body:JSON.stringify({sourcePaths:C.items,destinationPath:r})}):C.operation==="cut"&&(await p("/api/fs/bulk/move",{method:"POST",body:JSON.stringify({sourcePaths:C.items,destinationPath:r})}),$(null)),w(),await u()}catch(t){h(`Paste failed: ${t instanceof Error?t.message:"Unknown error"}`,"error")}},cs=()=>{if(!r||S.includes(r))return;const t=[...S,r];He(t),localStorage.setItem("weasel.bookmarks",JSON.stringify(t))},jt=t=>{const a=(Array.isArray(S)?S:[]).filter(l=>l!==t);He(a),localStorage.setItem("weasel.bookmarks",JSON.stringify(a))},ds=t=>{x(t),w(),ve(!1)},xe=r&&S.includes(r),ms=async t=>{const s=window.prompt("Zip file name (e.g., archive.zip)",`${t.name}.zip`);if(!s)return;const a=je(r||Ue(t.fullPath),s);await p("/api/fs/bulk/zip",{method:"POST",body:JSON.stringify({sourcePaths:[t.fullPath],zipFilePath:a})}),await u()},us=async()=>{if(c.size===0)return;const t=window.prompt("Zip file name (e.g., archive.zip)","archive.zip");if(!t)return;const s=je(r,t);await p("/api/fs/bulk/zip",{method:"POST",body:JSON.stringify({sourcePaths:Array.from(c),zipFilePath:s})}),w(),await u()},kt=async t=>{const s=r||Ue(t);await p("/api/fs/unzip",{method:"POST",body:JSON.stringify({zipFilePath:t,destinationPath:s})}),await u()},hs=t=>{t.preventDefault(),t.stopPropagation(),_e||ee(!0)},xs=t=>{t.preventDefault(),t.stopPropagation(),ee(!0)},fs=t=>{t.preventDefault(),t.stopPropagation(),t.currentTarget===t.target&&ee(!1)},ps=async t=>{if(t.preventDefault(),t.stopPropagation(),ee(!1),!r){h("Select a folder before uploading files.","error");return}const s=Array.from(t.dataTransfer.files);if(s.length!==0)try{for(const a of s){const l=new FormData;l.append("path",ke(r)),l.append("file",a,a.name),await Pt(l)}await u()}catch(a){h(`Upload failed: ${a instanceof Error?a.message:"Unknown error"}`,"error")}},fe=async t=>{if(Us(t)){Ce(t);return}Ke(t),Ne(!0),te("");try{const s=new URL("/api/fs/content",window.location.origin);s.searchParams.set("path",t);const a=await fetch(s.toString());if(a.ok){const l=await a.text();te(l)}}catch(s){console.error("Failed to load file content:",s)}},gs=()=>{Ke(null),Ne(!1),te("")};n.useEffect(()=>{if(!A||!U)return;const t=setInterval(async()=>{try{const s=new URL("/api/fs/content",window.location.origin);s.searchParams.set("path",U);const a=await fetch(s.toString());if(a.ok){const l=await a.text();te(l)}}catch(s){console.error("Failed to refresh tail content:",s)}},2e3);return()=>clearInterval(t)},[A,U]);const ys=n.useCallback(()=>{Xe(!0)},[]),Ie=n.useCallback(()=>{Xe(!1),localStorage.setItem("weasel.layout.leftPanelWidth",Se.toString())},[Se]),Oe=n.useRef(null),Te=n.useCallback(t=>{if(!le||!Oe.current)return;const s=Oe.current.getBoundingClientRect(),a=(t.clientX-s.left)/s.width*100;a>=20&&a<=70&&(Wt(a),localStorage.setItem("weasel.layout.leftPanelWidth",a.toString()))},[le]);n.useEffect(()=>(le&&(window.addEventListener("mousemove",Te),window.addEventListener("mouseup",Ie)),()=>{window.removeEventListener("mousemove",Te),window.removeEventListener("mouseup",Ie)}),[le,Te,Ie]);const wt=(t,s)=>{t.preventDefault(),t.stopPropagation(),ne({x:t.clientX,y:t.clientY,item:s})},vt=n.useMemo(()=>Fe.find(t=>r.startsWith(t.fullPath))?.fullPath||null,[r,Fe]);return e.jsxs("section",{className:"space-y-4 relative",onDragOver:hs,onDragEnter:xs,onDragLeave:fs,onDrop:ps,children:[_e&&r&&e.jsx("div",{className:"fixed inset-0 bg-sky-900/30 backdrop-blur-sm z-50 flex items-center justify-center pointer-events-none",children:e.jsxs("div",{className:"bg-slate-800 border-4 border-dashed border-sky-500 rounded-lg p-8 shadow-2xl",children:[e.jsx(Dt,{size:48,className:"mx-auto mb-4 text-sky-400"}),e.jsx("p",{className:"text-xl font-semibold text-white",children:"Drop files to upload"}),e.jsxs("p",{className:"text-sm text-slate-400 mt-2",children:["to ",r]})]})}),e.jsxs("div",{className:"submenu-container",children:[e.jsxs("button",{className:`submenu-tab ${vt?"":"active"}`,onClick:()=>{x(i),w()},children:[e.jsx(pe,{size:16}),"Home"]}),Fe.map(t=>e.jsxs("button",{className:`submenu-tab ${vt===t.fullPath?"active":""}`,onClick:()=>{x(t.fullPath),w()},children:[e.jsx(ks,{size:16}),t.name]},t.fullPath))]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-end gap-2 flex-wrap",children:[c.size>0&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn-outline",onClick:rs,children:e.jsx(ge,{size:16})}),e.jsx("button",{className:"btn-outline",onClick:pt,children:e.jsx(ye,{size:16})}),e.jsx("button",{className:"btn-outline",onClick:us,children:e.jsx(Mt,{size:16})}),e.jsx("button",{className:"btn-outline",onClick:gt,children:e.jsx(It,{size:16})}),e.jsx("button",{className:"btn-outline",onClick:yt,children:e.jsx(Rt,{size:16})}),e.jsx("button",{className:"btn-outline",onClick:w,children:e.jsx(T,{size:16})})]}),C&&e.jsx("button",{className:"btn-outline bg-sky-900/30 border-sky-500",onClick:bt,disabled:!r,children:e.jsx(Fs,{size:16})})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-900/50 p-2 rounded border border-slate-800 overflow-hidden",children:[e.jsxs("span",{className:"text-slate-500 flex-shrink-0",children:[se("common.path"),":"]}),e.jsxs("div",{className:"flex items-center gap-1 flex-1 min-w-0 overflow-hidden",children:[e.jsx("button",{className:"text-sm font-medium text-sky-400 hover:text-sky-300 hover:underline flex-shrink-0",onClick:()=>{x(i),w()},title:"Go to home folder",children:"Home"}),r&&r.split("\\").filter(Boolean).map((t,s,a)=>{const l=a.slice(0,s+1).join("\\")+"\\",f=s===a.length-1;return e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 min-w-0",children:[e.jsx("span",{className:"text-slate-500 flex-shrink-0",children:"/"}),e.jsx("button",{className:`text-sm font-medium truncate max-w-[150px] ${f?"text-white":"text-sky-400 hover:text-sky-300 hover:underline"}`,onClick:()=>{f||(x(l),w())},disabled:f,title:l,children:t})]},s)})]}),c.size>0&&e.jsxs("span",{className:"text-xs text-sky-400 flex-shrink-0 bg-sky-900/20 px-2 py-1 rounded",children:[c.size," ",se("files.selected")]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:z,onChange:t=>Ze(t.target.value),placeholder:se("common.search"),className:"px-3 py-2 bg-slate-800 border border-slate-700 rounded text-sm w-64 focus:outline-none focus:border-sky-500 pl-9"}),e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:e.jsx(Cs,{size:14})}),z&&e.jsx("button",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 hover:text-white",onClick:()=>Ze(""),title:"Clear search",children:e.jsx(T,{size:16})})]})}),e.jsxs("div",{className:"flex gap-2 flex-wrap justify-end",children:[e.jsx("div",{className:"relative",children:e.jsx("button",{className:`btn-outline ${xe?"bg-amber-900/30 border-amber-500":""}`,onClick:()=>{xe?jt(r):cs()},disabled:!r,title:xe?"Remove bookmark":"Add bookmark",children:xe?e.jsx($t,{size:16,className:"fill-amber-400 text-amber-400"}):e.jsx(Ls,{size:16})})}),S.length>0&&e.jsxs("div",{className:"relative",children:[e.jsx("button",{className:"btn-outline",onClick:()=>ve(!Y),title:"Show bookmarks",children:e.jsx($t,{size:16})}),Y&&e.jsxs("div",{className:"absolute top-full right-0 mt-2 w-80 bg-slate-800 border border-slate-700 rounded shadow-lg z-50 max-h-96 overflow-y-auto",children:[e.jsx("div",{className:"p-3 border-b border-slate-700",children:e.jsx("h4",{className:"font-semibold text-sm",children:"Bookmarked Folders"})}),e.jsx("div",{className:"divide-y divide-slate-700",children:Array.isArray(S)&&S.map(t=>e.jsxs("div",{className:"flex items-center gap-2 p-3 hover:bg-slate-700/50",children:[e.jsxs("button",{className:"flex-1 text-left text-sm hover:text-sky-400 break-all",onClick:()=>ds(t),children:[e.jsx(pe,{size:14,className:"inline mr-2 text-amber-300"}),t||"Root"]}),e.jsx("button",{className:"icon-btn text-red-400 hover:text-red-300",onClick:()=>jt(t),title:"Remove bookmark",children:e.jsx(T,{size:14})})]},t))})]})]})]})]})]}),et&&e.jsxs("p",{className:"text-red-400 text-sm",children:["Failed to load items: ",String(et)]}),e.jsxs("div",{ref:Oe,className:"flex flex-row gap-2",style:{height:"calc(100vh - 140px)",minHeight:"600px"},children:[e.jsxs("div",{className:"panel flex flex-col overflow-hidden",style:{width:`${Se}%`,minWidth:"250px"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"panel-title mb-0",children:"Folders"}),e.jsx("button",{className:"icon-btn",onClick:()=>L(!0),title:"New Folder",children:e.jsx(Et,{size:16})}),e.jsx("button",{className:"icon-btn",onClick:u,title:"Refresh",children:e.jsx(At,{size:16})})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-400",children:[e.jsxs("button",{className:"hover:text-white flex items-center gap-1",onClick:()=>J("name"),children:["Name ",g.key==="name"&&(g.direction==="asc"?e.jsx(_,{size:12}):e.jsx(K,{size:12}))]}),e.jsxs("button",{className:"hover:text-white flex items-center gap-1",onClick:()=>J("date"),children:["Date ",g.key==="date"&&(g.direction==="asc"?e.jsx(_,{size:12}):e.jsx(K,{size:12}))]})]})]}),y.length>0&&e.jsx("div",{className:"flex items-center gap-3 px-2 py-1.5 border-b border-slate-700 bg-slate-800/30",children:e.jsxs("button",{className:"flex items-center gap-2 text-xs text-slate-400 hover:text-white transition-colors",onClick:()=>{H==="all"?ns():as()},title:H==="all"?"Deselect all folders":"Select all folders",children:[H==="none"&&e.jsx(Ct,{size:14}),H==="partial"&&e.jsx(Ot,{size:14,className:"text-sky-400"}),H==="all"&&e.jsx(Lt,{size:14,className:"text-sky-400"}),e.jsx("span",{children:"Select all"})]})}),e.jsxs("div",{className:"divide-y divide-slate-800 overflow-y-auto flex-1 pr-2",children:[ie&&e.jsx("p",{className:"py-4 text-sm text-slate-400",children:"Loading…"}),!ie&&y.length===0&&e.jsx("p",{className:"py-4 text-sm text-slate-400",children:"No folders"}),Array.isArray(y)&&y.map(t=>e.jsxs("div",{className:`item-row hover:bg-slate-800/50 cursor-pointer ${c.has(t.fullPath)?"bg-slate-800/70":""}`,onClick:s=>{s.target.closest('input[type="checkbox"]')||s.target.closest("button")||nt(t)},onContextMenu:s=>wt(s,t),children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("input",{type:"checkbox",checked:c.has(t.fullPath),onChange:s=>{s.stopPropagation(),ht(t)},className:"checkbox flex-shrink-0",onClick:s=>s.stopPropagation()}),e.jsx(pe,{size:18,className:"text-amber-300 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:t.name}),e.jsx("p",{className:"text-xs text-slate-400",children:St(t.modifiedAt)})]})]}),e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{className:"icon-btn",onClick:s=>{s.stopPropagation(),Me(t)},title:"Rename",children:e.jsx($e,{size:14})}),e.jsx("button",{className:"icon-btn text-red-400 hover:text-red-300",onClick:s=>{s.stopPropagation(),Ee(t)},title:"Delete",children:e.jsx(ye,{size:14})})]})]},t.fullPath))]}),e.jsx(zt,{currentPage:ze,totalItems:de.length,pageSize:B,onPageChange:Qe,onPageSizeChange:_t})]}),e.jsx("div",{className:"w-2 cursor-col-resize bg-slate-900 hover:bg-sky-500/50 transition-colors flex items-center justify-center z-10 flex-shrink-0 rounded",onMouseDown:ys,children:e.jsx("div",{className:"h-8 w-1 bg-slate-600 rounded-full"})}),e.jsxs("div",{className:"panel flex-1 flex flex-col overflow-hidden",style:{minWidth:"400px"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"panel-title mb-0",children:se("files.files")}),e.jsx("button",{className:"icon-btn",onClick:()=>I(!0),title:"New File",children:e.jsx(Et,{size:16})}),e.jsx("button",{className:"icon-btn",onClick:()=>document.getElementById("file-upload-input")?.click(),title:"Upload",children:e.jsx(Dt,{size:16})}),e.jsx("button",{className:"icon-btn",onClick:u,title:"Refresh",children:e.jsx(At,{size:16})})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-400",children:[e.jsxs("button",{className:"hover:text-white flex items-center gap-1",onClick:()=>J("name"),children:["Name ",g.key==="name"&&(g.direction==="asc"?e.jsx(_,{size:12}):e.jsx(K,{size:12}))]}),e.jsxs("button",{className:"hover:text-white flex items-center gap-1",onClick:()=>J("size"),children:["Size ",g.key==="size"&&(g.direction==="asc"?e.jsx(_,{size:12}):e.jsx(K,{size:12}))]}),e.jsxs("button",{className:"hover:text-white flex items-center gap-1",onClick:()=>J("date"),children:["Date ",g.key==="date"&&(g.direction==="asc"?e.jsx(_,{size:12}):e.jsx(K,{size:12}))]})]})]}),b.length>0&&e.jsx("div",{className:"flex items-center gap-3 px-2 py-1.5 border-b border-slate-700 bg-slate-800/30",children:e.jsxs("button",{className:"flex items-center gap-2 text-xs text-slate-400 hover:text-white transition-colors",onClick:()=>{Z==="all"?is():ls()},title:Z==="all"?"Deselect all files":"Select all files",children:[Z==="none"&&e.jsx(Ct,{size:14}),Z==="partial"&&e.jsx(Ot,{size:14,className:"text-sky-400"}),Z==="all"&&e.jsx(Lt,{size:14,className:"text-sky-400"}),e.jsx("span",{children:"Select all"})]})}),e.jsxs("div",{className:"divide-y divide-slate-800 overflow-y-auto flex-1 pr-2",children:[ie&&e.jsx("p",{className:"py-4 text-sm text-slate-400",children:"Loading…"}),!ie&&b.length===0&&e.jsx("p",{className:"py-4 text-sm text-slate-400",children:"No files"}),Array.isArray(b)&&b.map(t=>{const s=Q(t.fullPath),a=t.name.toLowerCase().endsWith(".zip"),l=s==="image",f=Ut(t.fullPath),v=Bt(t.fullPath),Nt=Bs(t.fullPath);return e.jsxs("div",{className:`item-row hover:bg-slate-800/50 cursor-default group ${c.has(t.fullPath)?"bg-slate-800/70":""}`,onContextMenu:m=>wt(m,t),children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("input",{type:"checkbox",checked:c.has(t.fullPath),onChange:()=>ht(t),className:"checkbox flex-shrink-0",onClick:m=>m.stopPropagation()}),e.jsx("span",{className:`flex-shrink-0 ${Nt.color}`,children:Nt.icon}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:t.name}),e.jsxs("p",{className:"text-xs text-slate-400",children:[ws(t.sizeBytes)," – ",St(t.modifiedAt)]})]})]}),e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{className:"icon-btn",onClick:m=>{m.stopPropagation(),X(t.fullPath)},title:"Download",children:e.jsx(ge,{size:14})}),a&&e.jsx("button",{className:"icon-btn",onClick:m=>{m.stopPropagation(),kt(t.fullPath)},title:"Unzip",children:e.jsx(Be,{size:14})}),f&&e.jsx("button",{className:"icon-btn",onClick:m=>{m.stopPropagation(),lt(t)},title:"Edit",children:e.jsx(Tt,{size:14})}),l&&e.jsx("button",{className:"icon-btn",onClick:m=>{m.stopPropagation(),fe(t.fullPath)},title:"View",children:e.jsx(be,{size:14})}),v&&!l&&e.jsx("button",{className:"icon-btn",onClick:m=>{m.stopPropagation(),fe(t.fullPath)},title:"Tail",children:e.jsx(be,{size:14})}),e.jsx("button",{className:"icon-btn",onClick:m=>{m.stopPropagation(),Me(t)},title:"Rename",children:e.jsx($e,{size:14})}),e.jsx("button",{className:"icon-btn text-red-400 hover:text-red-300",onClick:m=>{m.stopPropagation(),Ee(t)},title:"Delete",children:e.jsx(ye,{size:14})})]})]},t.fullPath)})]}),e.jsx(zt,{currentPage:Pe,totalItems:me.length,pageSize:q,onPageChange:Ge,onPageSizeChange:Kt})]})]}),d&&e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400 uppercase tracking-[0.2em]",children:"Editing"}),e.jsx("p",{className:"font-semibold text-white break-all",children:d})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"btn-outline",onClick:Le,children:"Close"}),e.jsx("button",{className:"btn-primary",onClick:ts,disabled:qe||Je&&!We,children:qe?"Saving…":"Save"})]})]}),e.jsx("div",{className:"modal-body",children:Je&&!We?e.jsx("p",{className:"text-sm text-slate-400",children:"Loading content…"}):e.jsx(n.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-[400px] bg-slate-900 rounded border border-slate-800",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-sky-500 border-t-transparent rounded-full animate-spin mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Loading editor..."})]})}),children:e.jsx(Os,{height:"400px",theme:"vs-dark",language:$s(d),value:k,onChange:t=>N(t??""),options:{minimap:{enabled:!1},fontSize:14,scrollBeyondLastLine:!1}})})})]})}),U&&e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-slate-400 uppercase tracking-[0.2em]",children:["Monitoring File ",A&&e.jsx("span",{className:"text-green-400 ml-2",children:"● Live"})]}),e.jsx("p",{className:"font-semibold text-white break-all",children:U})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:`btn-outline ${A?"bg-amber-900/30 border-amber-500":"bg-green-900/30 border-green-500"}`,onClick:()=>Ne(!A),children:A?"Pause":"Resume"}),e.jsx("button",{className:"btn-outline",onClick:gs,children:"Close"})]})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("pre",{className:"text-sm font-mono whitespace-pre-wrap break-all bg-slate-900 p-4 rounded max-h-96 overflow-y-auto",children:Vt||"Loading..."}),e.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Auto-refreshing every 2 seconds"})]})]})}),M&&e.jsx("div",{className:"modal-backdrop",onClick:()=>Ce(null),children:e.jsxs("div",{className:"modal max-w-4xl",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400 uppercase tracking-[0.2em]",children:"Image Viewer"}),e.jsx("p",{className:"font-semibold text-white break-all",children:M.split("\\").pop()})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{className:"btn-outline",onClick:()=>X(M),children:[e.jsx(ge,{size:16,className:"mr-1"}),"Download"]}),e.jsx("button",{className:"btn-outline",onClick:()=>Ce(null),children:"Close"})]})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{className:"flex items-center justify-center bg-slate-900 rounded p-4",children:e.jsx("img",{src:`/api/fs/download?path=${encodeURIComponent(M)}`,alt:M.split("\\").pop(),className:"max-w-full max-h-[70vh] object-contain"})}),e.jsx("p",{className:"text-xs text-slate-400 mt-2 break-all",children:M})]})]})}),ae&&(()=>{const t=ae.item,s=t.isDirectory?null:Q(t.fullPath),a=!t.isDirectory&&Ut(t.fullPath),l=!t.isDirectory&&Bt(t.fullPath),f=s==="image",v=t.name.toLowerCase().endsWith(".zip");return e.jsx(Is,{x:ae.x,y:ae.y,onClose:()=>ne(null),items:[...t.isDirectory?[{label:"Open",icon:e.jsx(pe,{size:14}),onClick:()=>nt(t)}]:[],{label:"Download",icon:e.jsx(ge,{size:14}),onClick:()=>xt(t)},{label:"Zip",icon:e.jsx(Mt,{size:14}),onClick:()=>ms(t)},...a?[{label:"Edit",icon:e.jsx(Tt,{size:14}),onClick:()=>lt(t)}]:[],...f?[{label:"View",icon:e.jsx(be,{size:14}),onClick:()=>fe(t.fullPath)}]:[],...l&&!f?[{label:"Tail",icon:e.jsx(be,{size:14}),onClick:()=>fe(t.fullPath)}]:[],{label:"Copy",icon:e.jsx(It,{size:14}),onClick:()=>{$({items:[t.fullPath],operation:"copy"}),ne(null)}},{label:"Cut",icon:e.jsx(Rt,{size:14}),onClick:()=>{$({items:[t.fullPath],operation:"cut"}),ne(null)}},...v?[{label:"Unzip",icon:e.jsx(Be,{size:14}),onClick:()=>kt(t.fullPath)}]:[],{label:"Rename",icon:e.jsx($e,{size:14}),onClick:()=>Me(t)},{label:"Delete",icon:e.jsx(ye,{size:14}),onClick:()=>Ee(t),danger:!0}]})})(),e.jsx(vs,{isOpen:P.isOpen,title:P.title,message:P.message,onConfirm:P.onConfirm,onCancel:()=>V({...P,isOpen:!1}),variant:P.variant}),Gt&&e.jsx("div",{className:"modal-backdrop",onClick:()=>L(!1),children:e.jsxs("div",{className:"modal",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Create Folder"}),e.jsx("button",{className:"icon-btn",onClick:()=>L(!1),children:e.jsx(T,{size:16})})]}),e.jsx("div",{className:"modal-body",children:e.jsx("input",{className:"input-text w-full",placeholder:"Folder name",value:ue,onChange:t=>it(t.target.value),onKeyDown:t=>{t.key==="Enter"?rt():t.key==="Escape"&&L(!1)},autoFocus:!0})}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{className:"btn-outline",onClick:()=>L(!1),children:"Cancel"}),e.jsx("button",{className:"btn-primary",onClick:rt,disabled:!ue.trim(),children:"Create"})]})]})}),Yt&&e.jsx("div",{className:"modal-backdrop",onClick:()=>I(!1),children:e.jsxs("div",{className:"modal",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Create File"}),e.jsx("button",{className:"icon-btn",onClick:()=>I(!1),children:e.jsx(T,{size:16})})]}),e.jsx("div",{className:"modal-body",children:e.jsx("input",{className:"input-text w-full",placeholder:"File name (e.g. notes.txt)",value:he,onChange:t=>ot(t.target.value),onKeyDown:t=>{t.key==="Enter"?ct():t.key==="Escape"&&I(!1)},autoFocus:!0})}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{className:"btn-outline",onClick:()=>I(!1),children:"Cancel"}),e.jsx("button",{className:"btn-primary",onClick:ct,disabled:!he.trim(),children:"Create"})]})]})}),es&&W&&e.jsx("div",{className:"modal-backdrop",onClick:()=>E(!1),children:e.jsxs("div",{className:"modal",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Rename"}),e.jsx("button",{className:"icon-btn",onClick:()=>E(!1),children:e.jsx(T,{size:16})})]}),e.jsx("div",{className:"modal-body",children:e.jsx("input",{className:"input-text w-full",value:O,onChange:t=>Ae(t.target.value),onKeyDown:t=>{t.key==="Enter"?ut():t.key==="Escape"&&E(!1)},autoFocus:!0})}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{className:"btn-outline",onClick:()=>E(!1),children:"Cancel"}),e.jsx("button",{className:"btn-primary",onClick:ut,disabled:!O.trim()||O===W.name,children:"Rename"})]})]})}),e.jsx("input",{id:"file-upload-input",type:"file",multiple:!0,className:"hidden",onChange:Qt})]})}export{Ys as default};
